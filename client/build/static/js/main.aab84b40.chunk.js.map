{"version":3,"sources":["themes/theme.js","Access.js","pages/Signup.js","pages/Login.js","pages/ChangePassword.js","pages/EmailVerification.js","pages/RecoverPassword.js","components/Sidebar/ChatContent.js","components/Sidebar/UserMenu.js","components/Sidebar/CurrentUser.js","components/Sidebar/Search.js","components/Sidebar/Sidebar.js","components/Sidebar/SidebarContainer.js","components/Sidebar/Chat.js","components/Sidebar/BadgeAvatar.js","components/ActiveChat/SenderBubble.js","components/ActiveChat/OtherUserBubble.js","components/ActiveChat/ActiveChat.js","components/ActiveChat/Input.js","components/ActiveChat/Header.js","components/ActiveChat/Messages.js","context/socket.js","components/Home.js","components/SnackbarMessage.js","pages/Verify.js","components/Profile.js","components/Account.js","routes.js","App.js","serviceWorker.js","index.js"],"names":["theme","createTheme","typography","fontFamily","fontSize","button","textTransform","letterSpacing","fontWeight","overrides","MuiInput","input","palette","primary","main","secondary","useStyles","makeStyles","_bgBox","root","height","bgGrid","backgroundSize","backgroundImage","backgroundRepeat","backgroundPosition","bgBox","_defineProperty","breakpoints","down","display","up","text","color","maxWidth","marginTop","textAlign","Access","_ref","WrappedComponent","classes","_jsxs","Grid","container","className","children","_jsx","item","xs","sm","md","Box","width","src","alt","Typography","variant","headerContainer","alignItems","paddingTop","flexDirection","justifyContent","headerInner","padding","alignSelf","headerContent","contentContainer","margin","whiteSpace","marginRight","formBox","welcomeText","paddingBottom","Signup","user","register","history","useHistory","_useState","useState","_useState2","_slicedToArray","formErrorMessage","setFormErrorMessage","handleRegister","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","form","formElements","username","email","password","confirmPassword","wrap","_context","prev","next","preventDefault","currentTarget","elements","value","abrupt","stop","_x","apply","arguments","useEffect","id","active","push","Button","component","Link","to","onSubmit","spacing","FormControl","fullWidth","TextField","label","name","type","required","error","inputProps","minLength","FormHelperText","size","forgotPasswordLink","textDecoration","Login","login","isButtonDisabled","setIsButtonDisabled","handleLogin","t0","finish","href","disabled","MUILink","backgroundColor","background","default","marginBottom","borderRadius","paper","boxShadow","shadows","submitButton","statusText","ChangePassword","recoveryChangePassword","setPassword","_useState3","_useState4","setConfirmPassword","_useState5","_useState6","status","setStatus","location","useLocation","token","URLSearchParams","search","get","handlePasswordChange","setTimeout","onChange","e","target","resendButton","EmailVerification","resendVerification","verificationStatus","setVerificationStatus","handleResendVerification","direction","onClick","RecoverPassword","recoverPassword","setEmail","handlePasswordRecovery","marginLeft","flexGrow","previewText","boldPreviewText","badgeRoot","badgeInner","ChatContent","_conversation$message","_conversation$message2","conversation","otherUser","latestMessageText","hasUnreadMessages","messages","length","senderId","isRead","countUnreadMessages","useMemo","filter","message","concat","Badge","badgeContent","badge","ellipsis","opacity","popper","zIndex","UserMenu","handleLogout","open","setOpen","anchorRef","useRef","handleClose","current","contains","handleListKeyDown","key","prevOpen","focus","IconButton","disableRipple","disableFocusRipple","ref","undefined","MoreHorizIcon","Popper","anchorEl","role","placement","transition","disablePortal","TransitionProps","Grow","_objectSpread","style","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","MenuItem","subContainer","CurrentUser","BadgeAvatar","photoUrl","online","filledInput","Search","handleChange","hiddenLabel","FilledInput","disableUnderline","placeholder","startAdornment","InputAdornment","position","SearchIcon","paddingLeft","paddingRight","title","Sidebar","searchTerm","_ref$conversations","conversations","setActiveChat","includes","map","Chat","SidebarContainer","clearSearchedUsers","addSearchedUsers","setSearchTerm","searchUsers","_yield$axios$get","data","axios","sent","console","_ref3","_callee2","_context2","_x2","cursor","handleClick","sidebar","profilePic","border","UserAvatar","anchorOrigin","horizontal","vertical","overlap","Avatar","date","bubble","readAvatar","SenderBubble","time","isLastReadMessage","avatar","usernameDate","OtherUserBubble","borderLeft","chatContainer","ActiveChat","obj","activeConversation","postMessage","patchMessage","find","_Fragment","Header","Messages","userId","Input","conversationId","justifySelf","setText","handleSubmit","reqBody","recipientId","sender","content","statusDot","props","getLastReadMessageId","i","moment","createdAt","format","socket","io","on","log","SocketContext","React","createContext","Home","logout","setUser","useContext","setConversations","setActiveConversation","isLoggedIn","setIsLoggedIn","saveMessage","body","_yield$axios$post","post","saveMessageRead","_yield$axios$patch","patch","sendMessage","emit","readMessage","_ref4","_callee3","_context3","updateReadMessagesInConvo","_x3","useCallback","convo","convoCopy","_toConsumableArray","slice","_ref5","_callee4","_context4","addMessageToConversation","addNewConvo","_x4","_data$sender","newConvo","addOnlineUser","removeOfflineUser","off","isFetching","fetchConversations","_ref6","_callee5","_context5","_ref7","_callee6","_context6","CssBaseline","users","currentUsers","forEach","newState","fakeConvo","snackbar","icon","success","SnackbarMessage","setSnackBarOpen","snackBarOpen","isError","Close","CheckCircleOutlineIcon","Snackbar","onClose","action","Fragment","ContentProps","successText","errorText","VerifySuccess","checkVerification","then","catch","profilePhoto","objectFit","backButton","top","left","Profile","uploadPhoto","photoFile","formData","response","FormData","append","prevUser","gutterBottom","accept","file","files","htmlFor","Account","withRouter","setMessage","setIsError","_useState7","_useState8","credentials","localStorage","setItem","_yield$axios$post2","newPassword","_x5","_yield$axios$post3","_x6","_x7","_callee7","_context7","delete","removeItem","_x8","fetchUser","_ref8","_callee8","_yield$axios$get2","_context8","Provider","SnackBarMessage","Switch","Route","path","render","Redirect","Verify","exact","interceptors","request","use","config","getItem","headers","App","MuiThemeProvider","BrowserRouter","Routes","Boolean","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.aab84b40.chunk.js","sourcesContent":["import { createTheme } from \"@material-ui/core\";\n\nexport const theme = createTheme({\n  typography: {\n    fontFamily: \"Open Sans, sans-serif\",\n    fontSize: 14,\n    button: {\n      textTransform: \"none\",\n      letterSpacing: 0,\n      fontWeight: \"bold\",\n    },\n  },\n  overrides: {\n    MuiInput: {\n      input: {\n        fontWeight: \"bold\",\n      },\n    },\n  },\n  palette: {\n    primary: { main: \"#3A8DFF\" },\n    secondary: { main: \"#B0B0B0\" },\n  },\n});\n","import { Box, Grid, makeStyles, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  bgGrid: {\n    backgroundSize: \"cover\",\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\",\n  },\n  bgBox: {\n    [theme.breakpoints.down(\"xs\")]: {\n      display: \"none\",\n    },\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"flex\",\n    },\n\n    minHeight: \"100vh\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n\n    backgroundSize: \"cover\",\n    justifyContent: \"center\",\n    backgroundImage:\n      \"linear-gradient(180deg, rgb(58,141,255, 0.75) 0%, rgb(134,185,255, 0.75) 100%)\",\n    backgroundPosition: \"center\",\n  },\n  text: {\n    color: \"#ffffff\",\n    maxWidth: \"300px\",\n    marginTop: \"30px\",\n    textAlign: \"center\",\n  },\n}));\n\nconst Access = ({ WrappedComponent }) => {\n  const classes = useStyles();\n  return (\n    <Grid container className={classes.root}>\n      <Grid item xs={false} sm={4} md={7} className={classes.bgGrid}>\n        <Box className={classes.bgBox}>\n          <img\n            width=\"67\"\n            src=\"https://res.cloudinary.com/dna1o7hrm/image/upload/v1612406581/r1hhd9ry5wxux0tqhju0.png\"\n            alt=\"chat bubble\"\n          />\n          <Typography variant=\"h4\" className={classes.text}>\n            Welcome to ChatApp\n          </Typography>\n        </Box>\n      </Grid>\n      <Grid item xs={12} sm={8} md={5}>\n        {WrappedComponent}\n      </Grid>\n    </Grid>\n  );\n};\nexport default Access;\n","import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  Grid,\n  Box,\n  Typography,\n  Button,\n  FormControl,\n  TextField,\n  FormHelperText,\n  makeStyles,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  headerContainer: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    paddingTop: \"23px\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  headerInner: {\n    padding: \"8px\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n  },\n  headerContent: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  text: {\n    color: \"#b0b0b0\",\n    textAlign: \"center\",\n    fontWeight: \"400\",\n    whiteSpace: \"nowrap\",\n    marginRight: \"21px\",\n  },\n  formBox: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n  },\n  welcomeText: {\n    color: \"#000000\",\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    paddingBottom: \"20px\",\n  },\n}));\n\nconst Signup = ({ user, register }) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const [formErrorMessage, setFormErrorMessage] = useState({});\n\n  const handleRegister = async (event) => {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const formElements = form.elements;\n    const username = formElements.username.value;\n    const email = formElements.email.value;\n    const password = formElements.password.value;\n    const confirmPassword = formElements.confirmPassword.value;\n\n    if (password !== confirmPassword) {\n      setFormErrorMessage({ confirmPassword: \"Passwords must match\" });\n      return;\n    }\n    await register({ username, email, password });\n  };\n\n  useEffect(() => {\n    if (user && user.id && user.active) history.push(\"/home\");\n  }, [user, history]);\n\n  useEffect(() => {\n    if (user && user.id && !user.active) history.push(\"/\");\n  }, [user, history]);\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <Box>\n        <Box container className={classes.headerContainer}>\n          <Box className={classes.headerInner}>\n            <Box className={classes.headerContent}>\n              <Typography variant=\"body1\" className={classes.text}>\n                Need to log in?\n              </Typography>\n              <Button component={Link} to=\"/login\">\n                Login\n              </Button>\n            </Box>\n          </Box>\n        </Box>\n        <Box className={classes.contentContainer}>\n          <Grid\n            container\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            className={classes.formBox}\n          >\n            <Typography variant=\"h4\" className={classes.welcomeText}>\n              Register your account\n            </Typography>\n            <form onSubmit={handleRegister} className={classes.form}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <FormControl fullWidth>\n                    <TextField\n                      aria-label=\"username\"\n                      label=\"Username\"\n                      name=\"username\"\n                      type=\"text\"\n                      required\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl fullWidth>\n                    <TextField\n                      label=\"E-mail address\"\n                      aria-label=\"e-mail address\"\n                      type=\"email\"\n                      name=\"email\"\n                      required\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl\n                    error={!!formErrorMessage.confirmPassword}\n                    fullWidth\n                  >\n                    <TextField\n                      aria-label=\"password\"\n                      label=\"Password\"\n                      type=\"password\"\n                      inputProps={{ minLength: 6 }}\n                      name=\"password\"\n                      required\n                    />\n                    <FormHelperText>\n                      {formErrorMessage.confirmPassword}\n                    </FormHelperText>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl\n                    error={!!formErrorMessage.confirmPassword}\n                    fullWidth\n                  >\n                    <TextField\n                      label=\"Confirm Password\"\n                      aria-label=\"confirm password\"\n                      type=\"password\"\n                      inputProps={{ minLength: 6 }}\n                      name=\"confirmPassword\"\n                      required\n                    />\n                    <FormHelperText>\n                      {formErrorMessage.confirmPassword}\n                    </FormHelperText>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                    fullWidth\n                  >\n                    Create\n                  </Button>\n                </Grid>\n              </Grid>\n            </form>\n          </Grid>\n        </Box>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default Signup;\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  Grid,\n  Box,\n  Typography,\n  Button,\n  FormControl,\n  TextField,\n  makeStyles,\n  Link as MUILink,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  headerContainer: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    paddingTop: \"23px\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  headerInner: {\n    padding: \"8px\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n  },\n  headerContent: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  text: {\n    color: \"#b0b0b0\",\n    textAlign: \"center\",\n    fontWeight: \"400\",\n    whiteSpace: \"nowrap\",\n    marginRight: \"21px\",\n  },\n  formBox: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n  },\n  welcomeText: {\n    color: \"#000000\",\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    paddingBottom: \"20px\",\n  },\n  forgotPasswordLink: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.primary.main,\n    textDecoration: \"none\", // Remove underline\n    \"&:hover\": {\n      textDecoration: \"underline\", // Add underline on hover\n    },\n  },\n}));\n\nconst Login = ({ user, login }) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const formElements = form.elements;\n    const username = formElements.username.value;\n    const password = formElements.password.value;\n\n    setIsButtonDisabled(true); // Disable the button while waiting for the response\n\n    try {\n      await login({ username, password });\n    } catch (error) {\n      // Handle the error, if needed\n    } finally {\n      setIsButtonDisabled(false); // Enable the button after the API response\n    }\n  };\n  useEffect(() => {\n    if (user && user.id && user.active) history.push(\"/home\");\n  }, [user, history]);\n\n  useEffect(() => {\n    if (user && user.id && !user.active) history.push(\"/\");\n  }, [user, history]);\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <Box>\n        <Box container item className={classes.headerContainer}>\n          <Box className={classes.headerInner}>\n            <Box className={classes.headerContent}>\n              <Typography variant=\"body1\" className={classes.text}>\n                Need to register?\n              </Typography>\n              <Link href=\"/register\" to=\"/register\">\n                <Button>Register</Button>\n              </Link>\n            </Box>\n          </Box>\n        </Box>\n        <Box className={classes.contentContainer}>\n          <Grid\n            container\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            className={classes.formBox}\n          >\n            <Typography variant=\"h4\" className={classes.welcomeText}>\n              Welcome Back!\n            </Typography>\n\n            <form onSubmit={handleLogin} className={classes.form}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <FormControl margin=\"normal\" required fullWidth>\n                    <TextField\n                      aria-label=\"username\"\n                      label=\"Username\"\n                      name=\"username\"\n                      type=\"text\"\n                      variant=\"outlined\"\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl margin=\"normal\" required fullWidth>\n                    <TextField\n                      label=\"Password\"\n                      aria-label=\"password\"\n                      type=\"password\"\n                      name=\"password\"\n                      variant=\"outlined\"\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                    disabled={isButtonDisabled}\n                    fullWidth\n                  >\n                    Login\n                  </Button>\n                </Grid>\n                <Grid item xs={12}>\n                  <MUILink\n                    component={Link}\n                    to=\"/password-recovery\"\n                    className={classes.forgotPasswordLink}\n                  >\n                    Forgot your password?\n                  </MUILink>\n                </Grid>\n              </Grid>\n            </form>\n          </Grid>\n        </Box>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport {\n  Grid,\n  Typography,\n  Button,\n  FormControl,\n  TextField,\n  makeStyles,\n} from \"@material-ui/core\";\nimport { useLocation, useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n    backgroundColor: theme.palette.background.default,\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  welcomeText: {\n    color: theme.palette.primary.main,\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    marginBottom: theme.spacing(3),\n  },\n  form: {\n    width: \"100%\",\n    maxWidth: \"400px\",\n    padding: theme.spacing(3),\n    borderRadius: theme.spacing(1),\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[3],\n  },\n  submitButton: {\n    marginTop: theme.spacing(3),\n  },\n  statusText: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.error.main,\n  },\n}));\n\nconst ChangePassword = ({ recoveryChangePassword }) => {\n  const classes = useStyles();\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n\n  const location = useLocation();\n  const token = new URLSearchParams(location.search).get(\"token\");\n\n  const history = useHistory();\n\n  const handlePasswordChange = async (event) => {\n    event.preventDefault();\n\n    if (password !== confirmPassword) {\n      setStatus(\"Passwords do not match. Please try again.\");\n      return;\n    }\n\n    try {\n      await recoveryChangePassword(token, password);\n      setStatus(\"Password changed successfully.\");\n      setTimeout(() => {\n        history.push(\"/\");\n      }, 3000); // Redirect after 3 seconds\n    } catch (error) {\n      setStatus(\"Failed to change password.\");\n    }\n  };\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <div className={classes.form}>\n        <Typography variant=\"h4\" className={classes.welcomeText}>\n          Change Password\n        </Typography>\n        <form onSubmit={handlePasswordChange}>\n          <FormControl margin=\"normal\" required>\n            <TextField\n              label=\"New Password\"\n              aria-label=\"new-password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              fullWidth\n            />\n          </FormControl>\n          <FormControl margin=\"normal\" required>\n            <TextField\n              label=\"Confirm Password\"\n              aria-label=\"confirm-password\"\n              type=\"password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              fullWidth\n            />\n          </FormControl>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submitButton}\n            fullWidth\n          >\n            Change Password\n          </Button>\n        </form>\n        <Typography variant=\"body2\" className={classes.statusText}>\n          {status}\n        </Typography>\n      </div>\n    </Grid>\n  );\n};\n\nexport default ChangePassword;\n","import React, { useState } from \"react\";\n\nimport { Grid, Box, Typography, Button, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  welcomeText: {\n    color: \"#000000\",\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    paddingBottom: \"20px\",\n  },\n  resendButton: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst EmailVerification = ({ user, resendVerification }) => {\n  const classes = useStyles();\n\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\n\n  const handleResendVerification = async () => {\n    try {\n      await resendVerification(user); // Implement this function to send a new verification link\n      setVerificationStatus(\"Verification link resent! Check your email.\");\n    } catch (error) {\n      setVerificationStatus(\"Failed to resend verification link.\");\n    }\n  };\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <Box className={classes.contentContainer}>\n        <Grid container justifyContent=\"center\" direction=\"column\">\n          <Typography variant=\"body1\" className={classes.welcomeText}>\n            You must verify your email to access the application.\n          </Typography>\n          <Typography variant=\"body2\">{verificationStatus}</Typography>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.resendButton}\n            onClick={handleResendVerification}\n          >\n            Resend Verification Link\n          </Button>\n        </Grid>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default EmailVerification;\n","import React, { useState } from \"react\";\nimport {\n  Grid,\n  Typography,\n  Button,\n  FormControl,\n  TextField,\n  makeStyles,\n  Box,\n} from \"@material-ui/core\";\nimport { useHistory, Link } from \"react-router-dom\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n\n  headerContainer: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    paddingTop: \"23px\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  headerInner: {\n    padding: \"8px\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n  },\n  headerContent: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  text: {\n    color: \"#b0b0b0\",\n    textAlign: \"center\",\n    fontWeight: \"400\",\n    whiteSpace: \"nowrap\",\n    marginRight: \"21px\",\n  },\n  formBox: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n  },\n  welcomeText: {\n    color: \"#000000\",\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    paddingBottom: \"20px\",\n  },\n\n  statusText: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.text.secondary,\n    textAlign: \"center\",\n  },\n}));\n\nconst RecoverPassword = ({ recoverPassword }) => {\n  const classes = useStyles();\n  const [email, setEmail] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const history = useHistory();\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\n\n  const handlePasswordRecovery = async (event) => {\n    event.preventDefault();\n\n    setIsButtonDisabled(true); // Disable the button while waiting for the API response\n\n    try {\n      await recoverPassword(email);\n      setStatus(\"Password recovery instructions sent to your email.\");\n      setTimeout(() => {\n        history.push(\"/login\");\n      }, 3000);\n    } catch (error) {\n      setStatus(\"Failed to initiate password recovery.\");\n    } finally {\n      setIsButtonDisabled(false); // Enable the button after API response\n    }\n  };\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <Box>\n        <Box container className={classes.headerContainer}>\n          <Box className={classes.headerInner}>\n            <Box className={classes.headerContent}>\n              <Typography variant=\"body1\" className={classes.text}>\n                Need to log in?\n              </Typography>\n              <Button component={Link} to=\"/login\">\n                Login\n              </Button>\n            </Box>\n          </Box>\n        </Box>\n        <Box className={classes.contentContainer}>\n          <Grid\n            container\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            className={classes.formBox}\n          >\n            <Typography variant=\"h4\" className={classes.welcomeText}>\n              Recover Password\n            </Typography>\n            <form className={classes.form} onSubmit={handlePasswordRecovery}>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <FormControl fullWidth margin=\"normal\" required>\n                    <TextField\n                      label=\"Email\"\n                      aria-label=\"email\"\n                      type=\"email\"\n                      variant=\"outlined\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                    />\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                    fullWidth\n                    disabled={isButtonDisabled}\n                  >\n                    Send Recovery Email\n                  </Button>\n                </Grid>\n              </Grid>\n            </form>\n          </Grid>\n          <Typography variant=\"body2\" className={classes.statusText}>\n            {status}\n          </Typography>\n        </Box>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default RecoverPassword;\n","import React, { useMemo } from \"react\";\nimport { Box, Typography, Badge } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginLeft: 20,\n    flexGrow: 1,\n  },\n  username: {\n    fontWeight: \"bold\",\n    letterSpacing: -0.2,\n  },\n  previewText: {\n    fontSize: 12,\n    color: \"#9CADC8\",\n    letterSpacing: -0.17,\n  },\n  boldPreviewText: {\n    color: \"black\",\n    fontWeight: \"600\",\n  },\n  badgeRoot: {\n    alignSelf: \"center\",\n    marginRight: 40,\n  },\n  badgeInner: {\n    backgroundColor: \"#3F92FF\",\n    color: \"#fff\",\n  },\n}));\n\nconst ChatContent = ({ conversation }) => {\n  const classes = useStyles();\n\n  const { otherUser } = conversation;\n  const latestMessageText = conversation.id && conversation.latestMessageText;\n\n  const hasUnreadMessages =\n    conversation.messages[conversation.messages.length - 1]?.senderId ===\n      otherUser.id &&\n    !conversation.messages[conversation.messages.length - 1]?.isRead;\n\n  const countUnreadMessages = useMemo(() => {\n    if (hasUnreadMessages) {\n      return conversation.messages.filter((message) => !message.isRead).length;\n    } else {\n      return 0;\n    }\n  }, [conversation.messages, hasUnreadMessages]);\n\n  return (\n    <Box className={classes.root}>\n      <Box>\n        <Typography className={classes.username}>\n          {otherUser.username}\n        </Typography>\n        <Typography\n          className={`${hasUnreadMessages && classes.boldPreviewText} ${\n            classes.previewText\n          }`}\n        >\n          {latestMessageText}\n        </Typography>\n      </Box>\n      <Badge\n        badgeContent={countUnreadMessages}\n        classes={{ root: classes.badgeRoot, badge: classes.badgeInner }}\n      />\n    </Box>\n  );\n};\n\nexport default ChatContent;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport {\n\tClickAwayListener,\n\tGrow,\n\tPaper,\n\tPopper,\n\tMenuItem,\n\tMenuList,\n\tBox,\n\tIconButton,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\nimport { Link } from \"react-router-dom\"; // Import Link from React Router\n\nconst useStyles = makeStyles(() => ({\n\tellipsis: {\n\t\tcolor: \"#95A7C4\",\n\t\tmarginRight: 24,\n\t\topacity: 0.9,\n\t},\n\t// Add a higher z-index value\n\tpopper: {\n\t\tzIndex: 1000,\n\t\t// Adjust this value as needed\n\t\tmarginRight: \"8px\", // Adjust this value as needed\n\t},\n}));\n\nexport default function UserMenu({ handleLogout }) {\n\tconst classes = useStyles();\n\tconst [open, setOpen] = useState(false);\n\tconst anchorRef = useRef();\n\n\tconst handleToggle = () => {\n\t\tsetOpen((prevOpen) => !prevOpen);\n\t};\n\n\tconst handleClose = (event) => {\n\t\tif (anchorRef.current && anchorRef.current.contains(event.target)) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetOpen(false);\n\t};\n\n\tfunction handleListKeyDown(event) {\n\t\tif (event.key === \"Tab\") {\n\t\t\tevent.preventDefault();\n\t\t\tsetOpen(false);\n\t\t} else if (event.key === \"Escape\") {\n\t\t\tsetOpen(false);\n\t\t}\n\t}\n\n\tconst prevOpen = useRef(open);\n\tuseEffect(() => {\n\t\tif (prevOpen.current === true && open === false) {\n\t\t\tanchorRef.current.focus();\n\t\t}\n\n\t\tprevOpen.current = open;\n\t}, [open]);\n\n\treturn (\n\t\t<Box\n\t\t\tdisplay=\"flex\"\n\t\t\talignItems=\"center\"\n\t\t\tspacing={2}\n\t\t\tclassName={classes.root}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisableRipple\n\t\t\t\t\tdisableFocusRipple\n\t\t\t\t\tref={anchorRef}\n\t\t\t\t\tid=\"composition-button\"\n\t\t\t\t\taria-controls={open ? \"composition-menu\" : undefined}\n\t\t\t\t\taria-expanded={open ? \"true\" : undefined}\n\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\tonClick={handleToggle}\n\t\t\t\t>\n\t\t\t\t\t<MoreHorizIcon classes={{ root: classes.ellipsis }} />\n\t\t\t\t</IconButton>\n\t\t\t\t<Popper\n\t\t\t\t\topen={open}\n\t\t\t\t\tanchorEl={anchorRef.current}\n\t\t\t\t\trole={undefined}\n\t\t\t\t\tplacement=\"bottom-start\"\n\t\t\t\t\ttransition\n\t\t\t\t\tdisablePortal\n\t\t\t\t\t// Add the custom class for z-index\n\t\t\t\t\tclassName={classes.popper}\n\t\t\t\t>\n\t\t\t\t\t{({ TransitionProps, placement }) => (\n\t\t\t\t\t\t<Grow\n\t\t\t\t\t\t\t{...TransitionProps}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttransformOrigin:\n\t\t\t\t\t\t\t\t\tplacement === \"bottom-start\" ? \"left top\" : \"left bottom\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paper>\n\t\t\t\t\t\t\t\t<ClickAwayListener onClickAway={handleClose}>\n\t\t\t\t\t\t\t\t\t<MenuList\n\t\t\t\t\t\t\t\t\t\tautoFocusItem={open}\n\t\t\t\t\t\t\t\t\t\tid=\"composition-menu\"\n\t\t\t\t\t\t\t\t\t\taria-labelledby=\"composition-button\"\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleListKeyDown}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\t\t\t\t\t\tto=\"/profile\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\t\t\t\t\t\tto=\"/account\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tMy account\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t<MenuItem onClick={() => handleLogout()}>Logout</MenuItem>\n\t\t\t\t\t\t\t\t\t</MenuList>\n\t\t\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grow>\n\t\t\t\t\t)}\n\t\t\t\t</Popper>\n\t\t\t</div>\n\t\t</Box>\n\t);\n}\n","import React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { BadgeAvatar } from \"./index\";\n\nimport UserMenu from \"./UserMenu\";\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\theight: 44,\n\t\tmarginTop: 23,\n\t\tmarginLeft: 6,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tsubContainer: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t\talignItems: \"center\",\n\t\tflexGrow: 1,\n\t},\n\tusername: {\n\t\tletterSpacing: -0.23,\n\t\tfontSize: 16,\n\t\tfontWeight: \"bold\",\n\t\tmarginLeft: 17,\n\t},\n\tellipsis: {\n\t\tcolor: \"#95A7C4\",\n\t\tmarginRight: 24,\n\t\topacity: 0.5,\n\t},\n}));\n\nconst CurrentUser = ({ user, handleLogout }) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Box className={classes.root}>\n\t\t\t<BadgeAvatar photoUrl={user?.photoUrl} online={true} />\n\t\t\t<Box className={classes.subContainer}>\n\t\t\t\t<Typography className={classes.username}>{user?.username}</Typography>\n\n\t\t\t\t<UserMenu handleLogout={handleLogout} />\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default CurrentUser;\n","import React from \"react\";\nimport { FormControl, FilledInput, InputAdornment } from \"@material-ui/core\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(() => ({\n  filledInput: {\n    height: 50,\n    background: \"#E9EEF9\",\n    borderRadius: 5,\n    fontSize: 13,\n    fontWeight: \"bold\",\n    color: \"#99A9C4\",\n    letterSpacing: 0,\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginBottom: 20,\n  },\n  input: {\n    \"&::placeholder\": {\n      color: \"#ADC0DE\",\n      opacity: 1,\n    },\n  },\n}));\n\nconst Search = ({ handleChange }) => {\n  const classes = useStyles();\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <FormControl fullWidth hiddenLabel>\n        <FilledInput\n          name=\"search\"\n          onChange={handleChange}\n          classes={{ root: classes.filledInput, input: classes.input }}\n          disableUnderline\n          placeholder=\"Search\"\n          startAdornment={\n            <InputAdornment position=\"start\">\n              <SearchIcon />\n            </InputAdornment>\n          }\n        ></FilledInput>\n      </FormControl>\n    </form>\n  );\n};\n\nexport default Search;\n","import React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Search, Chat, CurrentUser } from \"./index\";\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tpaddingLeft: 21,\n\t\tpaddingRight: 21,\n\t\tflexGrow: 1,\n\t},\n\ttitle: {\n\t\tfontSize: 20,\n\t\tletterSpacing: -0.29,\n\t\tfontWeight: \"bold\",\n\t\tmarginTop: 32,\n\t\tmarginBottom: 15,\n\t},\n}));\n\nconst Sidebar = ({\n\thandleChange,\n\tsearchTerm,\n\tconversations = [],\n\tuser,\n\tsetActiveChat,\n\thandleLogout,\n}) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Box className={classes.root}>\n\t\t\t<CurrentUser user={user} handleLogout={handleLogout} />\n\t\t\t<Typography className={classes.title}>Chats</Typography>\n\t\t\t<Search handleChange={handleChange} />\n\t\t\t{conversations\n\t\t\t\t.filter((conversation) =>\n\t\t\t\t\tconversation.otherUser.username.includes(searchTerm)\n\t\t\t\t)\n\t\t\t\t.map((conversation) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Chat\n\t\t\t\t\t\t\tconversation={conversation}\n\t\t\t\t\t\t\tkey={conversation.otherUser.username}\n\t\t\t\t\t\t\tsetActiveChat={setActiveChat}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t</Box>\n\t);\n};\n\nexport default Sidebar;\n","import React, { useState } from \"react\";\nimport { Sidebar } from \"./index\";\nimport axios from \"axios\";\n\nconst SidebarContainer = ({\n\tconversations,\n\tuser,\n\tclearSearchedUsers,\n\taddSearchedUsers,\n\tsetActiveChat,\n\thandleLogout,\n}) => {\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\n\n\tconst searchUsers = async (searchTerm) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/api/users/${searchTerm}`);\n\t\t\taddSearchedUsers(data);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst handleChange = async (event) => {\n\t\tif (event.target.value === \"\") {\n\t\t\t// clear searched convos\n\t\t\tclearSearchedUsers();\n\t\t\tsetSearchTerm(\"\");\n\t\t\treturn;\n\t\t}\n\t\tif (searchTerm.includes(event.target.value)) {\n\t\t\t// if new value is included in search term, we don't need to make another API call, just need to set the search term value so the conversations can be filtered in the rendering\n\t\t\tsetSearchTerm(event.target.value);\n\t\t\treturn;\n\t\t}\n\t\tawait searchUsers(event.target.value);\n\t\tsetSearchTerm(event.target.value);\n\t};\n\n\treturn (\n\t\t<Sidebar\n\t\t\thandleChange={handleChange}\n\t\t\tsearchTerm={searchTerm}\n\t\t\tconversations={conversations}\n\t\t\tuser={user}\n\t\t\tsetActiveChat={setActiveChat}\n\t\t\thandleLogout={handleLogout}\n\t\t/>\n\t);\n};\n\nexport default SidebarContainer;\n","import React from \"react\";\nimport { Box } from \"@material-ui/core\";\nimport { BadgeAvatar, ChatContent } from \"../Sidebar\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    borderRadius: 8,\n    height: 80,\n    boxShadow: \"0 2px 10px 0 rgba(88,133,196,0.05)\",\n    marginBottom: 10,\n    display: \"flex\",\n    alignItems: \"center\",\n    \"&:hover\": {\n      cursor: \"grab\",\n    },\n  },\n}));\n\nconst Chat = ({ conversation, setActiveChat }) => {\n  const classes = useStyles();\n  const { otherUser } = conversation;\n\n  const handleClick = async (conversation) => {\n    await setActiveChat(conversation.otherUser.username);\n  };\n\n  return (\n    <Box onClick={() => handleClick(conversation)} className={classes.root}>\n      <BadgeAvatar\n        photoUrl={otherUser.photoUrl}\n        username={otherUser.username}\n        online={otherUser.online}\n        sidebar={true}\n      />\n      <ChatContent conversation={conversation} />\n    </Box>\n  );\n};\n\nexport default Chat;\n","import React from \"react\";\nimport { Box, Badge, Avatar } from \"@material-ui/core\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(() => ({\n  profilePic: {\n    height: 44,\n    width: 44,\n  },\n  badge: {\n    height: 13,\n    width: 13,\n    borderRadius: \"50%\",\n    border: \"2px solid white\",\n    backgroundColor: \"#D0DAE9\",\n  },\n  online: {\n    backgroundColor: \"#1CED84\",\n  },\n  sidebar: {\n    marginLeft: 17,\n  },\n}));\n\nconst UserAvatar = ({ sidebar, username, photoUrl, online }) => {\n  const classes = useStyles();\n\n  return (\n    <Box className={sidebar ? classes.sidebar : \"\"}>\n      <Badge\n        classes={{ badge: `${classes.badge} ${online && classes.online}` }}\n        variant=\"dot\"\n        anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\n        overlap=\"circular\"\n      >\n        <Avatar alt={username} src={photoUrl} className={classes.profilePic} />\n      </Badge>\n    </Box>\n  );\n};\n\nexport default UserAvatar;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-end\",\n  },\n  date: {\n    fontSize: 11,\n    color: \"#BECCE2\",\n    fontWeight: \"bold\",\n    marginBottom: 5,\n  },\n  text: {\n    fontSize: 14,\n    color: \"#91A3C0\",\n    letterSpacing: -0.2,\n    padding: 8,\n    fontWeight: \"bold\",\n  },\n  bubble: {\n    background: \"#F4F6FA\",\n    borderRadius: \"10px 10px 0 10px\",\n  },\n  readAvatar: {\n    height: 20,\n    width: 20,\n    marginTop: 9,\n  },\n}));\n\nconst SenderBubble = ({ time, text, otherUser, isLastReadMessage }) => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <Typography className={classes.date}>{time}</Typography>\n      <Box className={classes.bubble}>\n        <Typography className={classes.text}>{text}</Typography>\n      </Box>\n      {isLastReadMessage && (\n        <Avatar\n          alt={otherUser.username}\n          src={otherUser.photoUrl}\n          className={classes.readAvatar}\n        />\n      )}\n    </Box>\n  );\n};\n\nexport default SenderBubble;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: \"flex\",\n  },\n  avatar: {\n    height: 30,\n    width: 30,\n    marginRight: 11,\n    marginTop: 6,\n  },\n  usernameDate: {\n    fontSize: 11,\n    color: \"#BECCE2\",\n    fontWeight: \"bold\",\n    marginBottom: 5,\n  },\n  bubble: {\n    backgroundImage: \"linear-gradient(225deg, #6CC1FF 0%, #3A8DFF 100%)\",\n    borderRadius: \"0 10px 10px 10px\",\n  },\n  text: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: \"#FFFFFF\",\n    letterSpacing: -0.2,\n    padding: 8,\n  },\n}));\n\nconst OtherUserBubble = ({ text, time, otherUser }) => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <Avatar\n        alt={otherUser.username}\n        src={otherUser.photoUrl}\n        className={classes.avatar}\n      />\n      <Box>\n        <Typography className={classes.usernameDate}>\n          {otherUser.username} {time}\n        </Typography>\n        <Box className={classes.bubble}>\n          <Typography className={classes.text}>{text}</Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default OtherUserBubble;\n","import React, { useEffect, useMemo } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Box } from \"@material-ui/core\";\nimport { Input, Header, Messages } from \"./index\";\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexGrow: 8,\n\t\tflexDirection: \"column\",\n\t\tborderLeft: \"1px solid grey\",\n\t},\n\tchatContainer: {\n\t\tmarginLeft: 41,\n\t\tmarginRight: 41,\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tflexGrow: 1,\n\t\tjustifyContent: \"space-between\",\n\t},\n}));\n\nconst ActiveChat = ({\n\tuser,\n\tconversations,\n\tactiveConversation,\n\tpostMessage,\n\tpatchMessage,\n}) => {\n\tconst classes = useStyles();\n\n\tconst conversation = useMemo(() => {\n\t\treturn conversations\n\t\t\t? conversations.find(\n\t\t\t\t\t(conversation) =>\n\t\t\t\t\t\tconversation.otherUser.username === activeConversation\n\t\t\t  )\n\t\t\t: {};\n\t}, [conversations, activeConversation]);\n\n\tconst isConversation = (obj) => {\n\t\treturn obj !== {} && obj !== undefined;\n\t};\n\n\tuseEffect(() => {\n\t\tconst { senderId, isRead } =\n\t\t\tconversation?.messages[conversation.messages.length - 1] || {};\n\t\tif (\n\t\t\tconversation &&\n\t\t\tconversation.otherUser &&\n\t\t\tsenderId === conversation.otherUser.id &&\n\t\t\t!isRead\n\t\t) {\n\t\t\tpatchMessage(senderId);\n\t\t}\n\t}, [conversation, patchMessage]);\n\n\treturn (\n\t\t<Box className={classes.root}>\n\t\t\t{isConversation(conversation) && conversation.otherUser && (\n\t\t\t\t<>\n\t\t\t\t\t<Header\n\t\t\t\t\t\tusername={conversation.otherUser.username}\n\t\t\t\t\t\tonline={conversation.otherUser.online || false}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box className={classes.chatContainer}>\n\t\t\t\t\t\t{user && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Messages\n\t\t\t\t\t\t\t\t\tmessages={conversation.messages}\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\n\t\t\t\t\t\t\t\t\tuserId={user.id}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\n\t\t\t\t\t\t\t\t\tconversationId={conversation.id || null}\n\t\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\t\tpostMessage={postMessage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default ActiveChat;\n","import React, { useState } from \"react\";\nimport { FormControl, FilledInput } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    justifySelf: \"flex-end\",\n    marginTop: 15,\n  },\n  input: {\n    height: 70,\n    backgroundColor: \"#F4F6FA\",\n    borderRadius: 8,\n    marginBottom: 20,\n  },\n}));\n\nconst Input = ({ otherUser, conversationId, user, postMessage }) => {\n  const classes = useStyles();\n  const [text, setText] = useState(\"\");\n\n  const handleChange = (event) => {\n    setText(event.target.value);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const formElements = form.elements;\n    // add sender user info if posting to a brand new convo, so that the other user will have access to username, profile pic, etc.\n    const reqBody = {\n      text: formElements.text.value,\n      recipientId: otherUser.id,\n      conversationId,\n      sender: conversationId ? null : user,\n    };\n    await postMessage(reqBody);\n    setText(\"\");\n  };\n\n  return (\n    <form className={classes.root} onSubmit={handleSubmit}>\n      <FormControl fullWidth hiddenLabel>\n        <FilledInput\n          classes={{ root: classes.input }}\n          disableUnderline\n          placeholder=\"Type something...\"\n          value={text}\n          name=\"text\"\n          onChange={handleChange}\n        />\n      </FormControl>\n    </form>\n  );\n};\n\nexport default Input;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    height: 89,\n    marginBottom: 34,\n    boxShadow: \"0 2px 20px 0 rgba(88,133,196,0.10)\",\n  },\n  content: {\n    display: \"flex\",\n    alignItems: \"center\",\n    marginLeft: 24,\n  },\n  username: {\n    fontSize: 20,\n    letterSpacing: -0.29,\n    fontWeight: \"bold\",\n    marginRight: 14,\n  },\n  statusText: {\n    fontSize: 12,\n    color: \"#BFC9DB\",\n    letterSpacing: -0.17,\n  },\n  statusDot: {\n    height: 8,\n    width: 8,\n    borderRadius: \"50%\",\n    marginRight: 5,\n    backgroundColor: \"#D0DAE9\",\n  },\n  online: {\n    background: \"#1CED84\",\n  },\n  ellipsis: {\n    color: \"#95A7C4\",\n    marginRight: 24,\n    opacity: 0.5,\n  },\n}));\n\nconst Header = ({ username, online }) => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <Box className={classes.content}>\n        <Typography className={classes.username}>{username}</Typography>\n        <Box className={`${classes.statusDot} ${online && classes.online}`} />\n        <Typography className={classes.statusText}>\n          {online ? \"Online\" : \"Offline\"}\n        </Typography>\n      </Box>\n      <MoreHorizIcon classes={{ root: classes.ellipsis }} />\n    </Box>\n  );\n};\n\nexport default Header;\n","import React, { useMemo } from \"react\";\nimport { Box } from \"@material-ui/core\";\nimport { SenderBubble, OtherUserBubble } from \".\";\nimport moment from \"moment\";\n\nconst Messages = (props) => {\n  const { messages, otherUser, userId } = props;\n\n  const getLastReadMessageId = useMemo(() => {\n    for (let i = messages.length - 1; i >= 0; i--) {\n      if (messages[i].isRead && messages[i].senderId === userId) {\n        return messages[i].id;\n      }\n    }\n    return 0;\n  }, [messages, userId]);\n\n  return (\n    <Box>\n      {messages.map((message) => {\n        const time = moment(message.createdAt).format(\"h:mm\");\n\n        return message.senderId === userId ? (\n          <SenderBubble\n            key={message.id}\n            text={message.text}\n            time={time}\n            otherUser={otherUser}\n            isLastReadMessage={getLastReadMessageId === message.id}\n          />\n        ) : (\n          <OtherUserBubble\n            key={message.id}\n            text={message.text}\n            time={time}\n            otherUser={otherUser}\n          />\n        );\n      })}\n    </Box>\n  );\n};\n\nexport default Messages;\n","import { io } from \"socket.io-client\";\n\nimport React from \"react\";\n\nexport const socket = io(\"http://ec2-54-224-72-128.compute-1.amazonaws.com\");\nsocket.on(\"connect\", () => {\n\tconsole.log(\"connected to server\");\n});\nexport const SocketContext = React.createContext();\n","import React, { useCallback, useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { Grid, CssBaseline } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { SidebarContainer } from \"../components/Sidebar\";\nimport { ActiveChat } from \"../components/ActiveChat\";\nimport { SocketContext } from \"../context/socket\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\theight: \"100vh\",\n\t},\n}));\n\nconst Home = ({ user, logout, setUser }) => {\n\tconst history = useHistory();\n\n\tconst socket = useContext(SocketContext);\n\n\tconst [conversations, setConversations] = useState([]);\n\tconst [activeConversation, setActiveConversation] = useState(null);\n\n\tconst classes = useStyles();\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\n\n\tconst addSearchedUsers = (users) => {\n\t\tconst currentUsers = {};\n\n\t\t// make table of current users so we can lookup faster\n\t\tconversations.forEach((convo) => {\n\t\t\tcurrentUsers[convo.otherUser.id] = true;\n\t\t});\n\n\t\tconst newState = [...conversations];\n\t\tusers.forEach((user) => {\n\t\t\t// only create a fake convo if we don't already have a convo with this user\n\t\t\tif (!currentUsers[user.id]) {\n\t\t\t\tlet fakeConvo = { otherUser: user, messages: [] };\n\t\t\t\tnewState.push(fakeConvo);\n\t\t\t}\n\t\t});\n\n\t\tsetConversations(newState);\n\t};\n\n\tconst clearSearchedUsers = () => {\n\t\tsetConversations((prev) => prev.filter((convo) => convo.id));\n\t};\n\n\tconst saveMessage = async (body) => {\n\t\tconst { data } = await axios.post(\"/api/messages\", body);\n\t\treturn data;\n\t};\n\tconst saveMessageRead = async (senderId) => {\n\t\tconst { data } = await axios.patch(`/api/messages/read/${senderId}`);\n\t\treturn data;\n\t};\n\n\tconst sendMessage = (data, body) => {\n\t\tsocket.emit(\"new-message\", {\n\t\t\tmessage: data.message,\n\t\t\trecipientId: body.recipientId,\n\t\t\tsender: data.sender,\n\t\t});\n\t};\n\tconst readMessage = (data) => {\n\t\tsocket.emit(\"read-messages\", {\n\t\t\tmessages: data.messages,\n\t\t\trecipientId: data.userId,\n\t\t\tsender: data.senderId,\n\t\t});\n\t};\n\tconst patchMessage = async (senderId) => {\n\t\ttry {\n\t\t\tconst data = await saveMessageRead(senderId);\n\t\t\tupdateReadMessagesInConvo(data);\n\t\t\treadMessage(data);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst updateReadMessagesInConvo = useCallback((data) => {\n\t\tconst { messages } = data;\n\t\tconst { conversationId } = messages[0];\n\t\tsetConversations((prev) =>\n\t\t\tprev.map((convo) => {\n\t\t\t\tif (convo.id === conversationId) {\n\t\t\t\t\tconst convoCopy = { ...convo };\n\t\t\t\t\tconvoCopy.messages = [\n\t\t\t\t\t\t...convoCopy.messages.slice(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tconvoCopy.messages.length - messages.length\n\t\t\t\t\t\t),\n\t\t\t\t\t\t...messages,\n\t\t\t\t\t];\n\t\t\t\t\treturn convoCopy;\n\t\t\t\t} else {\n\t\t\t\t\treturn convo;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}, []);\n\n\tconst postMessage = async (body) => {\n\t\ttry {\n\t\t\tconst data = await saveMessage(body);\n\t\t\tif (!body.conversationId) {\n\t\t\t\taddNewConvo(body.recipientId, data.message);\n\t\t\t} else {\n\t\t\t\taddMessageToConversation(data);\n\t\t\t}\n\n\t\t\tsendMessage(data, body);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t};\n\n\tconst addNewConvo = useCallback((recipientId, message) => {\n\t\tsetConversations((prev) =>\n\t\t\tprev.map((convo) => {\n\t\t\t\tif (convo.otherUser.id === recipientId) {\n\t\t\t\t\tconst convoCopy = { ...convo };\n\t\t\t\t\tconvoCopy.messages = [message];\n\t\t\t\t\tconvoCopy.latestMessageText = message.text;\n\t\t\t\t\tconvoCopy.id = message.conversationId;\n\t\t\t\t\treturn convoCopy;\n\t\t\t\t} else {\n\t\t\t\t\treturn convo;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}, []);\n\n\tconst addMessageToConversation = useCallback((data) => {\n\t\t// if sender isn't null, that means the message needs to be put in a brand new convo\n\n\t\tconst { message, sender = null } = data;\n\t\tif (sender !== null) {\n\t\t\tconst newConvo = {\n\t\t\t\tid: message.conversationId,\n\t\t\t\totherUser: sender,\n\t\t\t\tmessages: [message],\n\t\t\t\tlatestMessageText: message.text,\n\t\t\t};\n\n\t\t\tsetConversations((prev) => [newConvo, ...prev]);\n\t\t} else {\n\t\t\tsetConversations((prev) =>\n\t\t\t\tprev.map((convo) => {\n\t\t\t\t\tif (convo.id === message.conversationId) {\n\t\t\t\t\t\tconst convoCopy = { ...convo };\n\t\t\t\t\t\tconvoCopy.messages = [...convoCopy.messages, message];\n\t\t\t\t\t\tconvoCopy.latestMessageText = message.text;\n\t\t\t\t\t\treturn convoCopy;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn convo;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}, []);\n\n\tconst setActiveChat = (username) => {\n\t\tsetActiveConversation(username);\n\t};\n\n\tconst addOnlineUser = useCallback((id) => {\n\t\tsetConversations((prev) =>\n\t\t\tprev.map((convo) => {\n\t\t\t\tif (convo.otherUser.id === id) {\n\t\t\t\t\tconst convoCopy = { ...convo };\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: true };\n\t\t\t\t\treturn convoCopy;\n\t\t\t\t} else {\n\t\t\t\t\treturn convo;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}, []);\n\n\tconst removeOfflineUser = useCallback((id) => {\n\t\tsetConversations((prev) =>\n\t\t\tprev.map((convo) => {\n\t\t\t\tif (convo.otherUser.id === id) {\n\t\t\t\t\tconst convoCopy = { ...convo };\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: false };\n\t\t\t\t\treturn convoCopy;\n\t\t\t\t} else {\n\t\t\t\t\treturn convo;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}, []);\n\n\t// Lifecycle\n\n\tuseEffect(() => {\n\t\t// Socket init\n\t\tsocket.on(\"add-online-user\", addOnlineUser);\n\t\tsocket.on(\"remove-offline-user\", removeOfflineUser);\n\t\tsocket.on(\"new-message\", addMessageToConversation);\n\t\tsocket.on(\"read-messages\", updateReadMessagesInConvo);\n\t\treturn () => {\n\t\t\t// before the component is destroyed\n\t\t\t// unbind all event handlers used in this component\n\t\t\tsocket.off(\"add-online-user\", addOnlineUser);\n\t\t\tsocket.off(\"remove-offline-user\", removeOfflineUser);\n\t\t\tsocket.off(\"new-message\", addMessageToConversation);\n\t\t\tsocket.off(\"read-messages\", updateReadMessagesInConvo);\n\t\t};\n\t}, [\n\t\taddMessageToConversation,\n\t\tupdateReadMessagesInConvo,\n\t\taddOnlineUser,\n\t\tremoveOfflineUser,\n\t\tsocket,\n\t]);\n\n\tuseEffect(() => {\n\t\t// when fetching, prevent redirect\n\t\tif (user?.isFetching) return;\n\n\t\tif (user && user.id) {\n\t\t\tsetIsLoggedIn(true);\n\t\t} else {\n\t\t\t// If we were previously logged in, redirect to login instead of register\n\t\t\tif (isLoggedIn) history.push(\"/login\");\n\t\t\telse history.push(\"/register\");\n\t\t}\n\t}, [user, history, isLoggedIn]);\n\n\tuseEffect(() => {\n\t\tconst fetchConversations = async () => {\n\t\t\ttry {\n\t\t\t\tconst { data } = await axios.get(\"/api/conversations\");\n\t\t\t\tsetConversations(data);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t};\n\t\tif (!user.isFetching) {\n\t\t\tfetchConversations();\n\t\t}\n\t}, [user]);\n\n\tconst handleLogout = async () => {\n\t\tif (user && user.id) {\n\t\t\tawait logout(user.id);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Grid container component=\"main\" className={classes.root}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<SidebarContainer\n\t\t\t\t\tconversations={conversations}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tclearSearchedUsers={clearSearchedUsers}\n\t\t\t\t\taddSearchedUsers={addSearchedUsers}\n\t\t\t\t\tsetActiveChat={setActiveChat}\n\t\t\t\t\thandleLogout={handleLogout}\n\t\t\t\t/>\n\t\t\t\t<ActiveChat\n\t\t\t\t\tactiveConversation={activeConversation}\n\t\t\t\t\tconversations={conversations}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tpostMessage={postMessage}\n\t\t\t\t\tpatchMessage={patchMessage}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t</>\n\t);\n};\n\nexport default Home;\n","import React from \"react\";\nimport { Button, Snackbar } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Close from \"@material-ui/icons/Close\";\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\n\nconst useStyles = makeStyles((theme) => ({\n  snackbar: {\n    fontWeight: \"bold\",\n  },\n  icon: {\n    color: \"white\",\n  },\n  success: {\n    backgroundColor: \"green\",\n  },\n  error: {\n    backgroundColor: \"red\",\n  },\n}));\n\nconst SnackbarMessage = ({\n  setSnackBarOpen,\n  message,\n  snackBarOpen,\n  isError,\n}) => {\n  const classes = useStyles();\n\n  const icon = isError ? (\n    <Close color=\"secondary\" />\n  ) : (\n    <CheckCircleOutlineIcon />\n  );\n\n  return (\n    <Snackbar\n      open={snackBarOpen}\n      onClose={() => setSnackBarOpen(false)}\n      message={message || \"An error occurred. Please try again.\"}\n      action={\n        <React.Fragment>\n          <Button\n            className={classes.icon}\n            size=\"small\"\n            onClick={() => setSnackBarOpen(false)}\n          >\n            {icon}\n          </Button>\n        </React.Fragment>\n      }\n      ContentProps={{\n        classes: {\n          root: isError ? classes.error : classes.success,\n        },\n      }}\n    />\n  );\n};\n\nexport default SnackbarMessage;\n","import React, { useEffect, useState } from \"react\";\nimport { Grid, Box, Typography, makeStyles } from \"@material-ui/core\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  contentContainer: {\n    display: \"flex\",\n    margin: \"64px 32px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n  successText: {\n    color: \"#000000\",\n    fontSize: \"26px\",\n    fontWeight: \"600\",\n    paddingBottom: \"20px\",\n  },\n  errorText: {\n    color: \"red\",\n    fontSize: \"18px\",\n    paddingBottom: \"20px\",\n  },\n}));\n\nconst VerifySuccess = ({ checkVerification }) => {\n  const history = useHistory();\n  const location = useLocation();\n  const classes = useStyles();\n\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\n\n  useEffect(() => {\n    if (!location.search) {\n      history.push(\"/\");\n    } else {\n      const token = new URLSearchParams(location.search).get(\"token\");\n      if (!token) {\n        history.push(\"/\");\n      } else {\n        checkVerification(token)\n          .then(() => {\n            setVerificationStatus(\"success\");\n            setTimeout(() => {\n              history.push(\"/\");\n            }, 5000); // Redirect after 5 seconds\n          })\n          .catch((error) => {\n            console.error(error);\n            setVerificationStatus(\"error\");\n            setTimeout(() => {\n              history.push(\"/\");\n            }, 5000); // Redirect after 5 seconds\n          });\n      }\n    }\n  }, [history, location.search, checkVerification]);\n\n  return (\n    <Grid container justifyContent=\"center\" className={classes.root}>\n      <Box className={classes.contentContainer}>\n        <Grid container justifyContent=\"center\" direction=\"column\">\n          {verificationStatus === \"success\" ? (\n            <>\n              <Typography variant=\"body1\" className={classes.successText}>\n                Thank you, your account has been verified!\n              </Typography>\n              <Typography variant=\"body2\">\n                You will be redirected to the home page shortly.\n              </Typography>\n            </>\n          ) : (\n            <>\n              <Typography variant=\"body1\" className={classes.errorText}>\n                Email verification failed.\n              </Typography>\n              <Typography variant=\"body2\">\n                You will be redirected to the home page shortly.\n              </Typography>\n            </>\n          )}\n        </Grid>\n      </Box>\n    </Grid>\n  );\n};\n\nexport default VerifySuccess;\n","import React from \"react\";\nimport { Button, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\"; // Import the Link component\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t\tmarginTop: theme.spacing(4),\n\t\tposition: \"relative\", // Add relative positioning\n\t},\n\tprofilePhoto: {\n\t\twidth: 150,\n\t\theight: 150,\n\t\tborderRadius: \"50%\",\n\t\tobjectFit: \"cover\",\n\t\tmarginBottom: theme.spacing(2),\n\t},\n\tbackButton: {\n\t\tposition: \"absolute\",\n\t\ttop: 0,\n\t\tleft: 30,\n\t\tmargin: theme.spacing(1),\n\t},\n}));\n\nconst Profile = ({ user, setUser }) => {\n\tconst classes = useStyles();\n\n\tconst uploadPhoto = async (photoFile) => {\n\t\ttry {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"image\", photoFile);\n\t\t\tconsole.log(photoFile);\n\t\t\t// Make the API call to upload the photo\n\t\t\tconst response = await axios.post(\"/api/user/update-photo\", formData);\n\n\t\t\t// Update the user object with the new photoUrl\n\t\t\tsetUser((prevUser) => ({\n\t\t\t\t...prevUser,\n\t\t\t\tphotoUrl: response.data.photoUrl,\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\t// Handle the error here if needed\n\t\t}\n\t};\n\n\tconst handlePhotoChange = (event) => {\n\t\tconst file = event.target.files[0];\n\t\tif (file) {\n\t\t\tuploadPhoto(file);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Button\n\t\t\t\tcomponent={Link}\n\t\t\t\tto=\"/home\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"default\"\n\t\t\t\tclassName={classes.backButton}\n\t\t\t>\n\t\t\t\tBack to Home\n\t\t\t</Button>\n\t\t\t<img src={user.photoUrl} alt=\"Profile\" className={classes.profilePhoto} />\n\t\t\t<Typography variant=\"h5\" gutterBottom>\n\t\t\t\t{user.username}\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\t{user.email}\n\t\t\t</Typography>\n\t\t\t<input\n\t\t\t\ttype=\"file\"\n\t\t\t\taccept=\"image/*\"\n\t\t\t\tid=\"profile-photo-input\"\n\t\t\t\tname=\"image\"\n\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\tonChange={handlePhotoChange}\n\t\t\t/>\n\t\t\t<label htmlFor=\"profile-photo-input\">\n\t\t\t\t<Button component=\"span\" variant=\"contained\" color=\"primary\">\n\t\t\t\t\tUpload Profile Photo\n\t\t\t\t</Button>\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n\nexport default Profile;\n","import React from \"react\";\nimport { Button, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignItems: \"center\",\n\t\tmarginTop: theme.spacing(4),\n\t\tposition: \"relative\",\n\t},\n\tbackButton: {\n\t\tposition: \"absolute\",\n\t\ttop: 0,\n\t\tleft: 30,\n\t\tmargin: theme.spacing(1),\n\t},\n}));\n\nconst Account = ({ user }) => {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Button\n\t\t\t\tcomponent={Link}\n\t\t\t\tto=\"/home\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"default\"\n\t\t\t\tclassName={classes.backButton}\n\t\t\t>\n\t\t\t\tBack to Home\n\t\t\t</Button>\n\t\t\t<Typography variant=\"h5\" gutterBottom>\n\t\t\t\t{user.username}'s Account\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\tEmail: {user.email}\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"body1\" gutterBottom>\n\t\t\t\tAccount settings and details can go here.\n\t\t\t</Typography>\n\t\t</div>\n\t);\n};\n\nexport default Account;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Route, Switch, withRouter, Redirect } from \"react-router-dom\";\n\nimport Access from \"./Access.js\";\nimport Signup from \"./pages/Signup.js\";\nimport Login from \"./pages/Login.js\";\nimport ChangePassword from \"./pages/ChangePassword.js\";\nimport EmailVerification from \"./pages/EmailVerification.js\";\nimport RecoverPassword from \"./pages/RecoverPassword.js\";\nimport { SnackBarMessage, Home } from \"./components\";\nimport { SocketContext, socket } from \"./context/socket\";\nimport Verify from \"./pages/Verify.js\";\nimport Profile from \"./components/Profile.js\";\nimport Account from \"./components/Account.js\";\n\nconst Routes = (props) => {\n\tconst [user, setUser] = useState({\n\t\tisFetching: true,\n\t});\n\n\tconst [message, setMessage] = useState(\"\");\n\tconst [isError, setIsError] = useState(false);\n\tconst [snackBarOpen, setSnackBarOpen] = useState(false);\n\n\tconst login = async (credentials) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.post(\"/auth/login\", credentials);\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\n\t\t\tsetUser(data);\n\t\t\tsocket.emit(\"go-online\", data.id);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\tconst register = async (credentials) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.post(\"/auth/register\", credentials);\n\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\n\t\t\tsetUser(data);\n\t\t\tsocket.emit(\"go-online\", data.id);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\tconst recoverPassword = async (email) => {\n\t\ttry {\n\t\t\tawait axios.post(\"/auth/password/recover\", {\n\t\t\t\temail,\n\t\t\t});\n\n\t\t\tsetMessage(\"Recovery email sent!\");\n\n\t\t\tsetIsError(false);\n\t\t\tsetSnackBarOpen(true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\tconst recoveryChangePassword = async (token, password) => {\n\t\ttry {\n\t\t\tawait axios.post(`/auth/password/set/${token}`, {\n\t\t\t\tnewPassword: password,\n\t\t\t});\n\t\t\tsetMessage(\"Password changed successfully\");\n\t\t\tsetIsError(false);\n\t\t\tsetSnackBarOpen(true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\tconst resendVerification = async (user) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.post(`/auth/verify/resend`, { user });\n\t\t\tconsole.log(data);\n\t\t\tsetMessage(\"Verification resent!\");\n\t\t\tsetIsError(false);\n\t\t\tsetSnackBarOpen(true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\tconst checkVerification = async (token) => {\n\t\ttry {\n\t\t\tconst { data } = await axios.get(`/auth/verify?token=${token}`);\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\n\t\t\tsetUser(data);\n\t\t\tsetMessage(\"Email verified successfully!\");\n\t\t\tsetIsError(false);\n\t\t\tsetSnackBarOpen(true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetMessage(\"Email verification failed. Please try again.\");\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\tconst logout = async (id) => {\n\t\ttry {\n\t\t\tawait axios.delete(\"/auth/logout\");\n\t\t\tawait localStorage.removeItem(\"messenger-token\");\n\t\t\tsetUser({});\n\t\t\tsetMessage(\"Succesfully logged out\");\n\t\t\tsetIsError(false);\n\t\t\tsetSnackBarOpen(true);\n\t\t\tsocket.emit(\"logout\", id);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tsetMessage(error.response.data.error);\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t};\n\n\t// Lifecycle\n\n\tuseEffect(() => {\n\t\tconst fetchUser = async () => {\n\t\t\tsetUser((prev) => ({ ...prev, isFetching: true }));\n\t\t\ttry {\n\t\t\t\tconst { data } = await axios.get(\"/auth/user\");\n\t\t\t\tsetUser(data);\n\t\t\t\tif (data.id) {\n\t\t\t\t\tsocket.emit(\"go-online\", data.id);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t} finally {\n\t\t\t\tsetUser((prev) => ({ ...prev, isFetching: false }));\n\t\t\t}\n\t\t};\n\n\t\tfetchUser();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (user?.error) {\n\t\t\t// check to make sure error is what we expect, in case we get an unexpected server error object\n\t\t\tif (typeof user.error === \"string\") {\n\t\t\t\tsetMessage(user.error);\n\t\t\t} else {\n\t\t\t\tsetMessage(\"Internal Server Error. Please try again\");\n\t\t\t}\n\t\t\tsetIsError(true);\n\t\t\tsetSnackBarOpen(true);\n\t\t}\n\t}, [user?.error]);\n\n\tif (user?.isFetching) {\n\t\treturn <div>Loading...</div>;\n\t}\n\tconsole.log(user);\n\treturn (\n\t\t<SocketContext.Provider value={socket}>\n\t\t\t{snackBarOpen && (\n\t\t\t\t<SnackBarMessage // Updated component name\n\t\t\t\t\tsetSnackBarOpen={setSnackBarOpen}\n\t\t\t\t\tmessage={message}\n\t\t\t\t\tsnackBarOpen={snackBarOpen}\n\t\t\t\t\tisError={isError} // Set this based on whether it's an error message\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<Switch>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/login\"\n\t\t\t\t\trender={() => (\n\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\n\t\t\t\t\t)}\n\t\t\t\t/>\n\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/register\"\n\t\t\t\t\trender={() => (\n\t\t\t\t\t\t<Access\n\t\t\t\t\t\t\tWrappedComponent={<Signup user={user} register={register} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/verify\"\n\t\t\t\t\trender={() =>\n\t\t\t\t\t\tuser && user?.id && !user?.active ? (\n\t\t\t\t\t\t\t<Verify checkVerification={checkVerification} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Redirect to=\"/\" />\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/password-recovery\"\n\t\t\t\t\trender={() =>\n\t\t\t\t\t\tuser?.id && user?.active ? (\n\t\t\t\t\t\t\t<Redirect to=\"/home\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Access\n\t\t\t\t\t\t\t\tWrappedComponent={\n\t\t\t\t\t\t\t\t\t<RecoverPassword recoverPassword={recoverPassword} />\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/change-password\"\n\t\t\t\t\trender={() => (\n\t\t\t\t\t\t<ChangePassword recoveryChangePassword={recoveryChangePassword} />\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/\"\n\t\t\t\t\trender={(props) =>\n\t\t\t\t\t\tuser?.id ? (\n\t\t\t\t\t\t\tuser?.active ? (\n\t\t\t\t\t\t\t\t<Home user={user} logout={logout} />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Access\n\t\t\t\t\t\t\t\t\tWrappedComponent={\n\t\t\t\t\t\t\t\t\t\t<EmailVerification\n\t\t\t\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\t\t\t\tresendVerification={resendVerification}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/home\"\n\t\t\t\t\trender={() => <Home user={user} logout={logout} />}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/profile\"\n\t\t\t\t\trender={() => <Profile user={user} setUser={setUser} />}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/account\"\n\t\t\t\t\trender={() => <Account user={user} setUser={setUser} />}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</SocketContext.Provider>\n\t);\n};\n\nexport default withRouter(Routes);\n","import React from \"react\";\nimport { MuiThemeProvider } from \"@material-ui/core\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport { theme } from \"./themes/theme\";\nimport Routes from \"./routes\";\nimport axios from \"axios\";\n\naxios.interceptors.request.use(async function (config) {\n  const token = await localStorage.getItem(\"messenger-token\");\n  config.headers[\"x-access-token\"] = token;\n\n  return config;\n});\n\nfunction App() {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <BrowserRouter>\n        <Routes />\n      </BrowserRouter>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}