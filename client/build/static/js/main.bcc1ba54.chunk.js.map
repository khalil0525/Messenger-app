{"version":3,"sources":["themes/theme.js","Access.js","pages/Signup.js","pages/Login.js","pages/ChangePassword.js","pages/EmailVerification.js","pages/RecoverPassword.js","components/Sidebar/ChatContent.js","components/Sidebar/UserMenu.js","components/Sidebar/CurrentUser.js","components/Sidebar/Search.js","components/Sidebar/Sidebar.js","components/Sidebar/SidebarContainer.js","components/Sidebar/Chat.js","components/Sidebar/BadgeAvatar.js","components/ActiveChat/SenderBubble.js","components/ActiveChat/OtherUserBubble.js","components/ActiveChat/ActiveChat.js","components/ActiveChat/Input.js","components/ActiveChat/Header.js","components/ActiveChat/Messages.js","context/socket.js","components/Home.js","components/SnackbarMessage.js","pages/Verify.js","components/Profile.js","components/Account.js","routes.js","App.js","serviceWorker.js","index.js"],"names":["theme","createTheme","typography","fontFamily","fontSize","button","textTransform","letterSpacing","fontWeight","overrides","MuiInput","input","palette","primary","main","secondary","useStyles","makeStyles","_bgBox","root","height","bgGrid","backgroundSize","backgroundImage","backgroundRepeat","backgroundPosition","bgBox","_defineProperty","breakpoints","down","display","up","text","color","maxWidth","marginTop","textAlign","Access","_ref","WrappedComponent","classes","_jsxs","Grid","container","className","children","_jsx","item","xs","sm","md","Box","width","src","alt","Typography","variant","headerContainer","alignItems","paddingTop","flexDirection","justifyContent","headerInner","padding","alignSelf","headerContent","contentContainer","margin","whiteSpace","marginRight","formBox","welcomeText","paddingBottom","Signup","user","register","history","useHistory","_useState","useState","_useState2","_slicedToArray","formErrorMessage","setFormErrorMessage","handleRegister","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","form","formElements","username","email","password","confirmPassword","wrap","_context","prev","next","preventDefault","currentTarget","elements","value","abrupt","stop","_x","apply","arguments","useEffect","id","active","push","Button","component","Link","to","onSubmit","spacing","FormControl","fullWidth","TextField","label","name","type","required","error","inputProps","minLength","FormHelperText","size","forgotPasswordLink","textDecoration","Login","login","isButtonDisabled","setIsButtonDisabled","handleLogin","t0","finish","href","disabled","MUILink","backgroundColor","background","default","marginBottom","borderRadius","paper","boxShadow","shadows","submitButton","statusText","ChangePassword","recoveryChangePassword","setPassword","_useState3","_useState4","setConfirmPassword","_useState5","_useState6","status","setStatus","location","useLocation","token","URLSearchParams","search","get","handlePasswordChange","setTimeout","onChange","e","target","resendButton","EmailVerification","resendVerification","verificationStatus","setVerificationStatus","handleResendVerification","direction","onClick","RecoverPassword","recoverPassword","setEmail","handlePasswordRecovery","marginLeft","flexGrow","overflowX","previewText","overflow","textOverflow","boldPreviewText","badgeRoot","badgeInner","ChatContent","_conversation$message","_conversation$message2","conversation","otherUser","latestMessageText","truncatedMessage","length","concat","substring","hasUnreadMessages","messages","senderId","isRead","countUnreadMessages","useMemo","filter","message","Badge","badgeContent","badge","ellipsis","opacity","popper","zIndex","UserMenu","handleLogout","open","setOpen","anchorRef","useRef","handleClose","current","contains","handleListKeyDown","key","prevOpen","focus","IconButton","disableRipple","disableFocusRipple","ref","undefined","MoreHorizIcon","Popper","anchorEl","role","placement","transition","disablePortal","TransitionProps","Grow","_objectSpread","style","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","MenuItem","subContainer","CurrentUser","BadgeAvatar","photoUrl","online","filledInput","Search","handleChange","hiddenLabel","FilledInput","disableUnderline","placeholder","startAdornment","InputAdornment","position","SearchIcon","paddingLeft","paddingRight","title","Sidebar","searchTerm","_ref$conversations","conversations","pinnedConversations","setActiveChat","includes","map","Chat","SidebarContainer","clearSearchedUsers","addSearchedUsers","setSearchTerm","searchUsers","_yield$axios$get","data","axios","sent","console","_ref3","_callee2","_context2","_x2","cursor","handleClick","sidebar","profilePic","border","UserAvatar","anchorOrigin","horizontal","vertical","overlap","Avatar","avatar","date","bubble","minWidth","bubbleHeader","readAvatar","SenderBubble","time","isLastReadMessage","OtherUserBubble","borderLeft","chatContainer","ActiveChat","obj","activeConversation","postMessage","patchMessage","find","_Fragment","Header","Messages","userId","Input","conversationId","justifySelf","setText","handleSubmit","reqBody","recipientId","sender","borderBottom","content","statusDot","props","getLastReadMessageId","i","Scrollbars","autoHide","moment","createdAt","format","socket","io","process","on","log","SocketContext","React","createContext","Home","logout","setUser","useContext","setConversations","setActiveConversation","isLoggedIn","setIsLoggedIn","saveMessage","body","_yield$axios$post","post","saveMessageRead","_yield$axios$patch","patch","sendMessage","emit","readMessage","_ref4","_callee3","_context3","updateReadMessagesInConvo","_x3","useCallback","convo","convoCopy","_toConsumableArray","slice","_ref5","_callee4","_context4","addMessageToConversation","addNewConvo","_x4","_data$sender","newConvo","addOnlineUser","removeOfflineUser","off","isFetching","fetchConversations","_ref6","_callee5","_context5","_ref7","_callee6","_context6","CssBaseline","users","currentUsers","forEach","newState","fakeConvo","snackbar","icon","success","SnackbarMessage","setSnackBarOpen","snackBarOpen","isError","Close","CheckCircleOutlineIcon","Snackbar","onClose","action","Fragment","ContentProps","successText","errorText","VerifySuccess","checkVerification","then","catch","profilePhoto","objectFit","backButton","top","left","Profile","uploadPhoto","photoFile","formData","response","FormData","append","prevUser","gutterBottom","accept","file","files","htmlFor","Account","withRouter","setMessage","setIsError","_useState7","_useState8","credentials","localStorage","setItem","_yield$axios$post2","newPassword","_x5","_yield$axios$post3","_x6","_x7","_callee7","_context7","delete","removeItem","_x8","fetchUser","_ref8","_callee8","_yield$axios$get2","_context8","Provider","SnackBarMessage","Switch","Route","path","render","Redirect","Verify","exact","interceptors","request","use","config","getItem","headers","App","MuiThemeProvider","BrowserRouter","Routes","Boolean","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bcc1ba54.chunk.js","sourcesContent":["import { createTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createTheme({\r\n  typography: {\r\n    fontFamily: \"Open Sans, sans-serif\",\r\n    fontSize: 14,\r\n    button: {\r\n      textTransform: \"none\",\r\n      letterSpacing: 0,\r\n      fontWeight: \"bold\",\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiInput: {\r\n      input: {\r\n        fontWeight: \"bold\",\r\n      },\r\n    },\r\n  },\r\n  palette: {\r\n    primary: { main: \"#3A8DFF\" },\r\n    secondary: { main: \"#B0B0B0\" },\r\n  },\r\n});\r\n","import { Box, Grid, makeStyles, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  bgGrid: {\r\n    backgroundSize: \"cover\",\r\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  bgBox: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\",\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"flex\",\r\n    },\r\n\r\n    minHeight: \"100vh\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n\r\n    backgroundSize: \"cover\",\r\n    justifyContent: \"center\",\r\n    backgroundImage:\r\n      \"linear-gradient(180deg, rgb(58,141,255, 0.75) 0%, rgb(134,185,255, 0.75) 100%)\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  text: {\r\n    color: \"#ffffff\",\r\n    maxWidth: \"300px\",\r\n    marginTop: \"30px\",\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nconst Access = ({ WrappedComponent }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={false} sm={4} md={7} className={classes.bgGrid}>\r\n        <Box className={classes.bgBox}>\r\n          <img\r\n            width=\"67\"\r\n            src=\"https://res.cloudinary.com/dna1o7hrm/image/upload/v1612406581/r1hhd9ry5wxux0tqhju0.png\"\r\n            alt=\"chat bubble\"\r\n          />\r\n          <Typography variant=\"h4\" className={classes.text}>\r\n            Welcome to ChatApp\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item xs={12} sm={8} md={5}>\r\n        {WrappedComponent}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\nexport default Access;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  FormHelperText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n}));\r\n\r\nconst Signup = ({ user, register }) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [formErrorMessage, setFormErrorMessage] = useState({});\r\n\r\n  const handleRegister = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const formElements = form.elements;\r\n    const username = formElements.username.value;\r\n    const email = formElements.email.value;\r\n    const password = formElements.password.value;\r\n    const confirmPassword = formElements.confirmPassword.value;\r\n\r\n    if (password !== confirmPassword) {\r\n      setFormErrorMessage({ confirmPassword: \"Passwords must match\" });\r\n      return;\r\n    }\r\n    await register({ username, email, password });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && user.active) history.push(\"/home\");\r\n  }, [user, history]);\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && !user.active) history.push(\"/\");\r\n  }, [user, history]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to log in?\r\n              </Typography>\r\n              <Button component={Link} to=\"/login\">\r\n                Login\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Register your account\r\n            </Typography>\r\n            <form onSubmit={handleRegister} className={classes.form}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth>\r\n                    <TextField\r\n                      aria-label=\"username\"\r\n                      label=\"Username\"\r\n                      name=\"username\"\r\n                      type=\"text\"\r\n                      required\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth>\r\n                    <TextField\r\n                      label=\"E-mail address\"\r\n                      aria-label=\"e-mail address\"\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      required\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl\r\n                    error={!!formErrorMessage.confirmPassword}\r\n                    fullWidth\r\n                  >\r\n                    <TextField\r\n                      aria-label=\"password\"\r\n                      label=\"Password\"\r\n                      type=\"password\"\r\n                      inputProps={{ minLength: 6 }}\r\n                      name=\"password\"\r\n                      required\r\n                    />\r\n                    <FormHelperText>\r\n                      {formErrorMessage.confirmPassword}\r\n                    </FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl\r\n                    error={!!formErrorMessage.confirmPassword}\r\n                    fullWidth\r\n                  >\r\n                    <TextField\r\n                      label=\"Confirm Password\"\r\n                      aria-label=\"confirm password\"\r\n                      type=\"password\"\r\n                      inputProps={{ minLength: 6 }}\r\n                      name=\"confirmPassword\"\r\n                      required\r\n                    />\r\n                    <FormHelperText>\r\n                      {formErrorMessage.confirmPassword}\r\n                    </FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    fullWidth\r\n                  >\r\n                    Create\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n  Link as MUILink,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  forgotPasswordLink: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.primary.main,\r\n    textDecoration: \"none\", // Remove underline\r\n    \"&:hover\": {\r\n      textDecoration: \"underline\", // Add underline on hover\r\n    },\r\n  },\r\n}));\r\n\r\nconst Login = ({ user, login }) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const formElements = form.elements;\r\n    const username = formElements.username.value;\r\n    const password = formElements.password.value;\r\n\r\n    setIsButtonDisabled(true); // Disable the button while waiting for the response\r\n\r\n    try {\r\n      await login({ username, password });\r\n    } catch (error) {\r\n      // Handle the error, if needed\r\n    } finally {\r\n      setIsButtonDisabled(false); // Enable the button after the API response\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (user && user.id && user.active) history.push(\"/home\");\r\n  }, [user, history]);\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && !user.active) history.push(\"/\");\r\n  }, [user, history]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container item className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to register?\r\n              </Typography>\r\n              <Link href=\"/register\" to=\"/register\">\r\n                <Button>Register</Button>\r\n              </Link>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Welcome Back!\r\n            </Typography>\r\n\r\n            <form onSubmit={handleLogin} className={classes.form}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl margin=\"normal\" required fullWidth>\r\n                    <TextField\r\n                      aria-label=\"username\"\r\n                      label=\"Username\"\r\n                      name=\"username\"\r\n                      type=\"text\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl margin=\"normal\" required fullWidth>\r\n                    <TextField\r\n                      label=\"Password\"\r\n                      aria-label=\"password\"\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    disabled={isButtonDisabled}\r\n                    fullWidth\r\n                  >\r\n                    Login\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <MUILink\r\n                    component={Link}\r\n                    to=\"/password-recovery\"\r\n                    className={classes.forgotPasswordLink}\r\n                  >\r\n                    Forgot your password?\r\n                  </MUILink>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: theme.palette.primary.main,\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    maxWidth: \"400px\",\r\n    padding: theme.spacing(3),\r\n    borderRadius: theme.spacing(1),\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[3],\r\n  },\r\n  submitButton: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  statusText: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.error.main,\r\n  },\r\n}));\r\n\r\nconst ChangePassword = ({ recoveryChangePassword }) => {\r\n  const classes = useStyles();\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  const location = useLocation();\r\n  const token = new URLSearchParams(location.search).get(\"token\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handlePasswordChange = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (password !== confirmPassword) {\r\n      setStatus(\"Passwords do not match. Please try again.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await recoveryChangePassword(token, password);\r\n      setStatus(\"Password changed successfully.\");\r\n      setTimeout(() => {\r\n        history.push(\"/\");\r\n      }, 3000); // Redirect after 3 seconds\r\n    } catch (error) {\r\n      setStatus(\"Failed to change password.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <div className={classes.form}>\r\n        <Typography variant=\"h4\" className={classes.welcomeText}>\r\n          Change Password\r\n        </Typography>\r\n        <form onSubmit={handlePasswordChange}>\r\n          <FormControl margin=\"normal\" required>\r\n            <TextField\r\n              label=\"New Password\"\r\n              aria-label=\"new-password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              fullWidth\r\n            />\r\n          </FormControl>\r\n          <FormControl margin=\"normal\" required>\r\n            <TextField\r\n              label=\"Confirm Password\"\r\n              aria-label=\"confirm-password\"\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n              fullWidth\r\n            />\r\n          </FormControl>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submitButton}\r\n            fullWidth\r\n          >\r\n            Change Password\r\n          </Button>\r\n        </form>\r\n        <Typography variant=\"body2\" className={classes.statusText}>\r\n          {status}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { Grid, Box, Typography, Button, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  resendButton: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst EmailVerification = ({ user, resendVerification }) => {\r\n  const classes = useStyles();\r\n\r\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\r\n\r\n  const handleResendVerification = async () => {\r\n    try {\r\n      await resendVerification(user); // Implement this function to send a new verification link\r\n      setVerificationStatus(\"Verification link resent! Check your email.\");\r\n    } catch (error) {\r\n      setVerificationStatus(\"Failed to resend verification link.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box className={classes.contentContainer}>\r\n        <Grid container justifyContent=\"center\" direction=\"column\">\r\n          <Typography variant=\"body1\" className={classes.welcomeText}>\r\n            You must verify your email to access the application.\r\n          </Typography>\r\n          <Typography variant=\"body2\">{verificationStatus}</Typography>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.resendButton}\r\n            onClick={handleResendVerification}\r\n          >\r\n            Resend Verification Link\r\n          </Button>\r\n        </Grid>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default EmailVerification;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n\r\n  statusText: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.text.secondary,\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nconst RecoverPassword = ({ recoverPassword }) => {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const history = useHistory();\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\r\n\r\n  const handlePasswordRecovery = async (event) => {\r\n    event.preventDefault();\r\n\r\n    setIsButtonDisabled(true); // Disable the button while waiting for the API response\r\n\r\n    try {\r\n      await recoverPassword(email);\r\n      setStatus(\"Password recovery instructions sent to your email.\");\r\n      setTimeout(() => {\r\n        history.push(\"/login\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      setStatus(\"Failed to initiate password recovery.\");\r\n    } finally {\r\n      setIsButtonDisabled(false); // Enable the button after API response\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to log in?\r\n              </Typography>\r\n              <Button component={Link} to=\"/login\">\r\n                Login\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Recover Password\r\n            </Typography>\r\n            <form className={classes.form} onSubmit={handlePasswordRecovery}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth margin=\"normal\" required>\r\n                    <TextField\r\n                      label=\"Email\"\r\n                      aria-label=\"email\"\r\n                      type=\"email\"\r\n                      variant=\"outlined\"\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    fullWidth\r\n                    disabled={isButtonDisabled}\r\n                  >\r\n                    Send Recovery Email\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n          <Typography variant=\"body2\" className={classes.statusText}>\r\n            {status}\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default RecoverPassword;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box, Typography, Badge } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginLeft: 20,\r\n    flexGrow: 0,\r\n    overflowX: \"hidden\",\r\n  },\r\n  username: {\r\n    fontWeight: \"bold\",\r\n    letterSpacing: -0.2,\r\n    color: \"rgb(255, 255, 255)\",\r\n  },\r\n  previewText: {\r\n    fontSize: 14,\r\n    fontWeight: \"300\",\r\n    color: \"rgb(255, 255, 255, 50%)\",\r\n    letterSpacing: -0.17,\r\n    overflow: \"hidden\", // Hide overflowing text\r\n    whiteSpace: \"nowrap\", // Prevent line breaks\r\n    textOverflow: \"ellipsis\", // Show ellipsis when text overflows\r\n    maxWidth: \"100%\", // Ensure the text doesn't push the container beyond its bounds\r\n  },\r\n  boldPreviewText: {\r\n    color: \"rgb(255, 255, 255, 50%)\",\r\n    fontWeight: \"600\",\r\n  },\r\n  badgeRoot: {\r\n    alignSelf: \"center\",\r\n    marginRight: 40,\r\n  },\r\n  badgeInner: {\r\n    backgroundColor: \"rgb(245, 99, 101, 100%)\",\r\n    color: \"#fff\",\r\n    fontSize: 12,\r\n    fontWeight: \"bold\",\r\n  },\r\n}));\r\nconst MAX_PREVIEW_LENGTH = 30;\r\nconst ChatContent = ({ conversation }) => {\r\n  const classes = useStyles();\r\n\r\n  const { otherUser } = conversation;\r\n  const latestMessageText = conversation.id && conversation.latestMessageText;\r\n\r\n  const truncatedMessage =\r\n    latestMessageText?.length > MAX_PREVIEW_LENGTH\r\n      ? `${latestMessageText.substring(0, MAX_PREVIEW_LENGTH)}...`\r\n      : latestMessageText;\r\n\r\n  const hasUnreadMessages =\r\n    conversation.messages[conversation.messages.length - 1]?.senderId ===\r\n      otherUser.id &&\r\n    !conversation.messages[conversation.messages.length - 1]?.isRead;\r\n\r\n  const countUnreadMessages = useMemo(() => {\r\n    if (hasUnreadMessages) {\r\n      return conversation.messages.filter((message) => !message.isRead).length;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }, [conversation.messages, hasUnreadMessages]);\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box>\r\n        <Typography className={classes.username}>\r\n          {otherUser.username}\r\n        </Typography>\r\n        <Typography\r\n          className={`${hasUnreadMessages && classes.boldPreviewText} ${\r\n            classes.previewText\r\n          }`}\r\n        >\r\n          {truncatedMessage}\r\n        </Typography>\r\n      </Box>\r\n      <Badge\r\n        badgeContent={countUnreadMessages}\r\n        classes={{ root: classes.badgeRoot, badge: classes.badgeInner }}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ChatContent;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport {\r\n\tClickAwayListener,\r\n\tGrow,\r\n\tPaper,\r\n\tPopper,\r\n\tMenuItem,\r\n\tMenuList,\r\n\tBox,\r\n\tIconButton,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport { Link } from \"react-router-dom\"; // Import Link from React Router\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\tellipsis: {\r\n\t\tcolor: \"#95A7C4\",\r\n\t\tmarginRight: 24,\r\n\t\topacity: 0.9,\r\n\t},\r\n\t// Add a higher z-index value\r\n\tpopper: {\r\n\t\tzIndex: 1000,\r\n\t\t// Adjust this value as needed\r\n\t\tmarginRight: \"8px\", // Adjust this value as needed\r\n\t},\r\n}));\r\n\r\nexport default function UserMenu({ handleLogout }) {\r\n\tconst classes = useStyles();\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst anchorRef = useRef();\r\n\r\n\tconst handleToggle = () => {\r\n\t\tsetOpen((prevOpen) => !prevOpen);\r\n\t};\r\n\r\n\tconst handleClose = (event) => {\r\n\t\tif (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tfunction handleListKeyDown(event) {\r\n\t\tif (event.key === \"Tab\") {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tsetOpen(false);\r\n\t\t} else if (event.key === \"Escape\") {\r\n\t\t\tsetOpen(false);\r\n\t\t}\r\n\t}\r\n\r\n\tconst prevOpen = useRef(open);\r\n\tuseEffect(() => {\r\n\t\tif (prevOpen.current === true && open === false) {\r\n\t\t\tanchorRef.current.focus();\r\n\t\t}\r\n\r\n\t\tprevOpen.current = open;\r\n\t}, [open]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tspacing={2}\r\n\t\t\tclassName={classes.root}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tdisableFocusRipple\r\n\t\t\t\t\tref={anchorRef}\r\n\t\t\t\t\tid=\"composition-button\"\r\n\t\t\t\t\taria-controls={open ? \"composition-menu\" : undefined}\r\n\t\t\t\t\taria-expanded={open ? \"true\" : undefined}\r\n\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\tonClick={handleToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t<MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<Popper\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tanchorEl={anchorRef.current}\r\n\t\t\t\t\trole={undefined}\r\n\t\t\t\t\tplacement=\"bottom-start\"\r\n\t\t\t\t\ttransition\r\n\t\t\t\t\tdisablePortal\r\n\t\t\t\t\t// Add the custom class for z-index\r\n\t\t\t\t\tclassName={classes.popper}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ TransitionProps, placement }) => (\r\n\t\t\t\t\t\t<Grow\r\n\t\t\t\t\t\t\t{...TransitionProps}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\ttransformOrigin:\r\n\t\t\t\t\t\t\t\t\tplacement === \"bottom-start\" ? \"left top\" : \"left bottom\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Paper>\r\n\t\t\t\t\t\t\t\t<ClickAwayListener onClickAway={handleClose}>\r\n\t\t\t\t\t\t\t\t\t<MenuList\r\n\t\t\t\t\t\t\t\t\t\tautoFocusItem={open}\r\n\t\t\t\t\t\t\t\t\t\tid=\"composition-menu\"\r\n\t\t\t\t\t\t\t\t\t\taria-labelledby=\"composition-button\"\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleListKeyDown}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\t\t\t\t\t\tto=\"/account\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tMy account\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem onClick={() => handleLogout()}>Logout</MenuItem>\r\n\t\t\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t\t\t</ClickAwayListener>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grow>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Popper>\r\n\t\t\t</div>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { BadgeAvatar } from \"./index\";\r\n\r\nimport UserMenu from \"./UserMenu\";\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\theight: 44,\r\n\t\tmarginTop: 23,\r\n\t\tmarginLeft: 6,\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tsubContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tusername: {\r\n\t\tletterSpacing: -0.23,\r\n\t\tfontSize: 20,\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginLeft: 17,\r\n\t\tcolor: \"#fff\",\r\n\t},\r\n\tellipsis: {\r\n\t\tcolor: \"#95A7C4\",\r\n\t\tmarginRight: 24,\r\n\t\topacity: 0.5,\r\n\t},\r\n}));\r\n\r\nconst CurrentUser = ({ user, handleLogout }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<BadgeAvatar photoUrl={user?.photoUrl} online={true} />\r\n\t\t\t<Box className={classes.subContainer}>\r\n\t\t\t\t<Typography className={classes.username}>{user?.username}</Typography>\r\n\r\n\t\t\t\t<UserMenu handleLogout={handleLogout} />\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default CurrentUser;\r\n","import React from \"react\";\r\nimport { FormControl, FilledInput, InputAdornment } from \"@material-ui/core\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\tfilledInput: {\r\n\t\theight: 50,\r\n\t\tbackground: \"rgb(18, 22, 23)\",\r\n\t\tborderRadius: 5,\r\n\t\tfontSize: 13,\r\n\t\tfontWeight: \"bold\",\r\n\t\tcolor: \"#99A9C4\",\r\n\t\tletterSpacing: 0,\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmarginTop: 20,\r\n\t\tmarginBottom: 20,\r\n\t},\r\n\tinput: {\r\n\t\t\"&::placeholder\": {\r\n\t\t\tcolor: \"#ADC0DE\",\r\n\t\t\topacity: 1,\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst Search = ({ handleChange }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t<FormControl fullWidth hiddenLabel>\r\n\t\t\t\t<FilledInput\r\n\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tclasses={{ root: classes.filledInput, input: classes.input }}\r\n\t\t\t\t\tdisableUnderline\r\n\t\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\t\tstartAdornment={\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t}\r\n\t\t\t\t></FilledInput>\r\n\t\t\t</FormControl>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Search, Chat, CurrentUser } from \"./index\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tpaddingLeft: 16,\r\n\t\tpaddingRight: 16,\r\n\t\tflexGrow: 0,\r\n\t\tbackgroundColor: \"rgba(8,10,25,255)\",\r\n\t\toverflowX: \"hidden\",\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 16,\r\n\t\tletterSpacing: -0.29,\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginTop: 32,\r\n\t\tmarginBottom: 15,\r\n\t\tcolor: \"rgba(255, 255, 255, 30%)\",\r\n\t},\r\n}));\r\n\r\nconst Sidebar = ({\r\n\thandleChange,\r\n\tsearchTerm,\r\n\tconversations = [],\r\n\tpinnedConversations = [],\r\n\tuser,\r\n\tsetActiveChat,\r\n\thandleLogout,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<CurrentUser user={user} handleLogout={handleLogout} />\r\n\t\t\t<Search handleChange={handleChange} />\r\n\t\t\t<Typography className={classes.title}>PINNED</Typography>\r\n\t\t\t{conversations\r\n\t\t\t\t.filter((conversation) =>\r\n\t\t\t\t\tconversation.otherUser.username.includes(searchTerm)\r\n\t\t\t\t)\r\n\t\t\t\t.map((conversation) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Chat\r\n\t\t\t\t\t\t\tconversation={conversation}\r\n\t\t\t\t\t\t\tkey={conversation.otherUser.username}\r\n\t\t\t\t\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\r\n\t\t\t<Typography className={classes.title}>DIRECT MESSAGES</Typography>\r\n\t\t\t{conversations\r\n\t\t\t\t.filter((conversation) =>\r\n\t\t\t\t\tconversation.otherUser.username.includes(searchTerm)\r\n\t\t\t\t)\r\n\t\t\t\t.map((conversation) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Chat\r\n\t\t\t\t\t\t\tconversation={conversation}\r\n\t\t\t\t\t\t\tkey={conversation.otherUser.username}\r\n\t\t\t\t\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t<Typography className={classes.title}>GROUP MESSAGES</Typography>\r\n\t\t\t<Typography className={classes.title}>FRIEND REQUESTS</Typography>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default Sidebar;\r\n","import React, { useState } from \"react\";\r\nimport { Sidebar } from \"./index\";\r\nimport axios from \"axios\";\r\n\r\nconst SidebarContainer = ({\r\n\tconversations,\r\n\tuser,\r\n\tclearSearchedUsers,\r\n\taddSearchedUsers,\r\n\tsetActiveChat,\r\n\thandleLogout,\r\n}) => {\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n\tconst searchUsers = async (searchTerm) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get(`/api/users/${searchTerm}`);\r\n\t\t\taddSearchedUsers(data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleChange = async (event) => {\r\n\t\tif (event.target.value === \"\") {\r\n\t\t\t// clear searched convos\r\n\t\t\tclearSearchedUsers();\r\n\t\t\tsetSearchTerm(\"\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (searchTerm.includes(event.target.value)) {\r\n\t\t\t// if new value is included in search term, we don't need to make another API call, just need to set the search term value so the conversations can be filtered in the rendering\r\n\t\t\tsetSearchTerm(event.target.value);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait searchUsers(event.target.value);\r\n\t\tsetSearchTerm(event.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Sidebar\r\n\t\t\thandleChange={handleChange}\r\n\t\t\tsearchTerm={searchTerm}\r\n\t\t\tconversations={conversations}\r\n\t\t\tuser={user}\r\n\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\thandleLogout={handleLogout}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default SidebarContainer;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { BadgeAvatar, ChatContent } from \"../Sidebar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tborderRadius: 8,\r\n\t\theight: 80,\r\n\r\n\t\tmarginBottom: 10,\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\t\"&:hover\": {\r\n\t\t\tcursor: \"grab\",\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst Chat = ({ conversation, setActiveChat }) => {\r\n\tconst classes = useStyles();\r\n\tconst { otherUser } = conversation;\r\n\r\n\tconst handleClick = async (conversation) => {\r\n\t\tawait setActiveChat(conversation.otherUser.username);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Box onClick={() => handleClick(conversation)} className={classes.root}>\r\n\t\t\t<BadgeAvatar\r\n\t\t\t\tphotoUrl={otherUser.photoUrl}\r\n\t\t\t\tusername={otherUser.username}\r\n\t\t\t\tonline={otherUser.online}\r\n\t\t\t\tsidebar={true}\r\n\t\t\t/>\r\n\t\t\t<ChatContent conversation={conversation} />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Box, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\tprofilePic: {\r\n\t\theight: 44,\r\n\t\twidth: 44,\r\n\t},\r\n\tbadge: {\r\n\t\theight: 13,\r\n\t\twidth: 13,\r\n\t\tborderRadius: \"50%\",\r\n\t\tborder: \"2px solid rgba(8,10,25,255)\",\r\n\t\tbackgroundColor: \"#D0DAE9\",\r\n\t},\r\n\tonline: {\r\n\t\tbackgroundColor: \"#1CED84\",\r\n\t},\r\n\tsidebar: {\r\n\t\tmarginLeft: 17,\r\n\t},\r\n}));\r\n\r\nconst UserAvatar = ({ sidebar, username, photoUrl, online }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={sidebar ? classes.sidebar : \"\"}>\r\n\t\t\t<Badge\r\n\t\t\t\tclasses={{ badge: `${classes.badge} ${online && classes.online}` }}\r\n\t\t\t\tvariant=\"dot\"\r\n\t\t\t\tanchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n\t\t\t\toverlap=\"circular\"\r\n\t\t\t>\r\n\t\t\t\t<Avatar alt={username} src={photoUrl} className={classes.profilePic} />\r\n\t\t\t</Badge>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default UserAvatar;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-end\",\r\n\t\tmarginBottom: 10,\r\n\t},\r\n\tcontentContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"flex-end\",\r\n\t},\r\n\tavatar: {\r\n\t\theight: 40,\r\n\t\twidth: 40,\r\n\t\tmarginLeft: 10,\r\n\t},\r\n\r\n\tusername: {\r\n\t\tfontSize: 11,\r\n\t\tcolor: \"rgba(79, 127, 183, 100%)\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginBottom: 5,\r\n\t},\r\n\tdate: {\r\n\t\tfontSize: 11,\r\n\t\tcolor: \"rgba(255, 255, 255, 50%)\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginBottom: 5,\r\n\t},\r\n\tbubble: {\r\n\t\tbackground: \"rgba(66, 104, 149, 42%)\",\r\n\t\tborderRadius: \"10px 10px 0 10px\",\r\n\t\tpadding: 6,\r\n\t\tpaddingLeft: 10,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"start\",\r\n\t\talignItems: \"start\",\r\n\t\tminWidth: \"140px\",\r\n\t},\r\n\tbubbleHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\twidth: \"100%\",\r\n\t},\r\n\ttext: {\r\n\t\tfontSize: 14,\r\n\t\tfontWeight: \"bold\",\r\n\t\tcolor: \"#FFFFFF\",\r\n\t\tletterSpacing: -0.2,\r\n\t},\r\n\r\n\treadAvatar: {\r\n\t\theight: 20,\r\n\t\twidth: 20,\r\n\t\tmarginTop: 9,\r\n\t},\r\n}));\r\n\r\nconst SenderBubble = ({ time, text, otherUser, isLastReadMessage, user }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<Box className={classes.contentContainer}>\r\n\t\t\t\t<Box className={classes.bubble}>\r\n\t\t\t\t\t<Box className={classes.bubbleHeader}>\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t<Typography className={classes.username}>\r\n\t\t\t\t\t\t\t{user.username}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography className={classes.date}>{time}</Typography>\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t<Typography className={classes.text}>{text}</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{isLastReadMessage && (\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\talt={otherUser.username}\r\n\t\t\t\t\t\tsrc={otherUser.photoUrl}\r\n\t\t\t\t\t\tclassName={classes.readAvatar}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Box>\r\n\t\t\t<Avatar\r\n\t\t\t\talt={otherUser.username}\r\n\t\t\t\tsrc={user.photoUrl}\r\n\t\t\t\tclassName={classes.avatar}\r\n\t\t\t/>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default SenderBubble;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmarginBottom: 10,\r\n\t},\r\n\tavatar: {\r\n\t\theight: 40,\r\n\t\twidth: 40,\r\n\t\tmarginRight: 11,\r\n\t\talignSelf: \"flex-end\",\r\n\t},\r\n\r\n\tusername: {\r\n\t\tfontSize: 11,\r\n\t\tcolor: \"rgba(79, 127, 183, 100%)\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginBottom: 5,\r\n\t},\r\n\tdate: {\r\n\t\tfontSize: 11,\r\n\t\tcolor: \"rgba(255, 255, 255, 50%)\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginBottom: 5,\r\n\t},\r\n\tbubble: {\r\n\t\tbackgroundColor: \"rgba(33, 35, 38, 60%)\",\r\n\t\tborderRadius: \"8px 10px 10px 2px\",\r\n\t\tpadding: 6,\r\n\t\tpaddingLeft: 10,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"start\",\r\n\t\talignItems: \"start\",\r\n\t\tminWidth: \"140px\",\r\n\t},\r\n\tbubbleHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\twidth: \"100%\",\r\n\t},\r\n\ttext: {\r\n\t\tfontSize: 14,\r\n\t\tfontWeight: \"bold\",\r\n\t\tcolor: \"#FFFFFF\",\r\n\t\tletterSpacing: -0.2,\r\n\t},\r\n}));\r\n\r\nconst OtherUserBubble = ({ text, time, otherUser }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<Avatar\r\n\t\t\t\talt={otherUser.username}\r\n\t\t\t\tsrc={otherUser.photoUrl}\r\n\t\t\t\tclassName={classes.avatar}\r\n\t\t\t/>\r\n\t\t\t<Box>\r\n\t\t\t\t<Box className={classes.bubble}>\r\n\t\t\t\t\t<Box className={classes.bubbleHeader}>\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t<Typography className={classes.username}>\r\n\t\t\t\t\t\t\t{otherUser.username}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography className={classes.date}>{time}</Typography>\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t<Typography className={classes.text}>{text}</Typography>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default OtherUserBubble;\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Input, Header, Messages } from \"./index\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexGrow: 1,\r\n\t\tflexDirection: \"column\",\r\n\t\tborderLeft: \"4px solid rgba(49,51,65,255)\",\r\n\t\tbackgroundColor: \"rgba(8,28,26,255)\",\r\n\t\theight: \"100%\",\r\n\t},\r\n\tchatContainer: {\r\n\t\tpaddingLeft: 24,\r\n\t\tpaddingRight: 24,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tflexGrow: 1,\r\n\t\tjustifyContent: \"space-between\",\r\n\t},\r\n}));\r\n\r\nconst ActiveChat = ({\r\n\tuser,\r\n\tconversations,\r\n\tactiveConversation,\r\n\tpostMessage,\r\n\tpatchMessage,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst conversation = useMemo(() => {\r\n\t\treturn conversations\r\n\t\t\t? conversations.find(\r\n\t\t\t\t\t(conversation) =>\r\n\t\t\t\t\t\tconversation.otherUser.username === activeConversation\r\n\t\t\t  )\r\n\t\t\t: {};\r\n\t}, [conversations, activeConversation]);\r\n\r\n\tconst isConversation = (obj) => {\r\n\t\treturn obj !== {} && obj !== undefined;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { senderId, isRead } =\r\n\t\t\tconversation?.messages[conversation.messages.length - 1] || {};\r\n\t\tif (\r\n\t\t\tconversation &&\r\n\t\t\tconversation.otherUser &&\r\n\t\t\tsenderId === conversation.otherUser.id &&\r\n\t\t\t!isRead\r\n\t\t) {\r\n\t\t\tpatchMessage(senderId);\r\n\t\t}\r\n\t}, [conversation, patchMessage]);\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t{isConversation(conversation) && conversation.otherUser && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tusername={conversation.otherUser.username}\r\n\t\t\t\t\t\tonline={conversation.otherUser.online || false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Box className={classes.chatContainer}>\r\n\t\t\t\t\t\t{user && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\t\t\tmessages={conversation.messages}\r\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\r\n\t\t\t\t\t\t\t\t\tuserId={user.id}\r\n\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\r\n\t\t\t\t\t\t\t\t\tconversationId={conversation.id || null}\r\n\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\tpostMessage={postMessage}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default ActiveChat;\r\n","import React, { useState } from \"react\";\r\nimport { FormControl, FilledInput } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tjustifySelf: \"flex-end\",\r\n\t\tmarginTop: 15,\r\n\t},\r\n\tinput: {\r\n\t\theight: 70,\r\n\t\tbackgroundColor: \"rgb(18, 22, 23)\",\r\n\t\tcolor: \"rgb(255, 255, 255)\",\r\n\t\tborderRadius: 8,\r\n\t\tmarginBottom: 20,\r\n\t},\r\n}));\r\n\r\nconst Input = ({ otherUser, conversationId, user, postMessage }) => {\r\n\tconst classes = useStyles();\r\n\tconst [text, setText] = useState(\"\");\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tsetText(event.target.value);\r\n\t};\r\n\r\n\tconst handleSubmit = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst form = event.currentTarget;\r\n\t\tconst formElements = form.elements;\r\n\t\t// add sender user info if posting to a brand new convo, so that the other user will have access to username, profile pic, etc.\r\n\t\tconst reqBody = {\r\n\t\t\ttext: formElements.text.value,\r\n\t\t\trecipientId: otherUser.id,\r\n\t\t\tconversationId,\r\n\t\t\tsender: conversationId ? null : user,\r\n\t\t};\r\n\t\tawait postMessage(reqBody);\r\n\t\tsetText(\"\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className={classes.root} onSubmit={handleSubmit}>\r\n\t\t\t<FormControl fullWidth hiddenLabel>\r\n\t\t\t\t<FilledInput\r\n\t\t\t\t\tclasses={{ root: classes.input }}\r\n\t\t\t\t\tdisableUnderline\r\n\t\t\t\t\tplaceholder=\"Write a message...\"\r\n\t\t\t\t\tvalue={text}\r\n\t\t\t\t\tname=\"text\"\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t</FormControl>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Input;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\theight: 89,\r\n\t\tmarginBottom: 34,\r\n\t\tboxShadow: \"0 2px 20px 0 rgba(88,133,196,0.10)\",\r\n\t\tborderBottom: \"4px solid rgba(49,51,65,255)\",\r\n\t\tbackgroundColor: \"rgba(8,10,25,255)\",\r\n\t},\r\n\tcontent: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginLeft: 24,\r\n\t},\r\n\tusername: {\r\n\t\tfontSize: 20,\r\n\t\tletterSpacing: -0.29,\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginRight: 14,\r\n\t\tcolor: \"rgb(255, 255, 255)\",\r\n\t},\r\n\tstatusText: {\r\n\t\tfontSize: 12,\r\n\t\tcolor: \"#BFC9DB\",\r\n\t\tletterSpacing: -0.17,\r\n\t},\r\n\tstatusDot: {\r\n\t\theight: 8,\r\n\t\twidth: 8,\r\n\t\tborderRadius: \"50%\",\r\n\t\tmarginRight: 5,\r\n\t\tbackgroundColor: \"#D0DAE9\",\r\n\t},\r\n\tonline: {\r\n\t\tbackground: \"#1CED84\",\r\n\t},\r\n\tellipsis: {\r\n\t\tcolor: \"#95A7C4\",\r\n\t\tmarginRight: 24,\r\n\t\topacity: 0.5,\r\n\t},\r\n}));\r\n\r\nconst Header = ({ username, online }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<Box className={classes.content}>\r\n\t\t\t\t<Typography className={classes.username}>{username}</Typography>\r\n\t\t\t\t<Box className={`${classes.statusDot} ${online && classes.online}`} />\r\n\t\t\t\t<Typography className={classes.statusText}>\r\n\t\t\t\t\t{online ? \"Online\" : \"Offline\"}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Box>\r\n\t\t\t<MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import React, { useMemo } from \"react\";\r\nimport { SenderBubble, OtherUserBubble } from \".\";\r\nimport moment from \"moment\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\"; // Import Scrollbars\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\theight: \"calc(100vh - 200px)\", // Adjust the height as needed\r\n\t},\r\n\tcontainer: {\r\n\t\tpaddingLeft: 24,\r\n\t\tpaddingRight: 24,\r\n\t},\r\n}));\r\n\r\nconst Messages = (props) => {\r\n\tconst { messages, otherUser, userId, user } = props;\r\n\tconst classes = useStyles();\r\n\tconst getLastReadMessageId = useMemo(() => {\r\n\t\tfor (let i = messages.length - 1; i >= 0; i--) {\r\n\t\t\tif (messages[i].isRead && messages[i].senderId === userId) {\r\n\t\t\t\treturn messages[i].id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}, [messages, userId]);\r\n\r\n\treturn (\r\n\t\t<Scrollbars className={classes.root} autoHide={false}>\r\n\t\t\t<Box className={classes.container}>\r\n\t\t\t\t{messages.map((message) => {\r\n\t\t\t\t\tconst time = moment(message.createdAt).format(\"h:mm\");\r\n\r\n\t\t\t\t\treturn message.senderId === userId ? (\r\n\t\t\t\t\t\t<SenderBubble\r\n\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\ttext={message.text}\r\n\t\t\t\t\t\t\ttime={time}\r\n\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\totherUser={otherUser}\r\n\t\t\t\t\t\t\tisLastReadMessage={getLastReadMessageId === message.id}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<OtherUserBubble\r\n\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\ttext={message.text}\r\n\t\t\t\t\t\t\ttime={time}\r\n\t\t\t\t\t\t\totherUser={otherUser}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</Box>\r\n\t\t</Scrollbars>\r\n\t);\r\n};\r\n\r\nexport default Messages;\r\n","import { io } from \"socket.io-client\";\r\n\r\nimport React from \"react\";\r\nexport const socket = io(process.env.REACT_APP_API_URL);\r\nsocket.on(\"connect\", () => {\r\n\tconsole.log(\"connected to server\");\r\n});\r\nexport const SocketContext = React.createContext();\r\n","import React, { useCallback, useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Grid, CssBaseline } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { SidebarContainer } from \"../components/Sidebar\";\r\nimport { ActiveChat } from \"../components/ActiveChat\";\r\nimport { SocketContext } from \"../context/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\theight: \"100vh\",\r\n\t},\r\n}));\r\n\r\nconst Home = ({ user, logout, setUser }) => {\r\n\tconst history = useHistory();\r\n\r\n\tconst socket = useContext(SocketContext);\r\n\r\n\tconst [conversations, setConversations] = useState([]);\r\n\tconst [activeConversation, setActiveConversation] = useState(null);\r\n\r\n\tconst classes = useStyles();\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tconst addSearchedUsers = (users) => {\r\n\t\tconst currentUsers = {};\r\n\r\n\t\t// make table of current users so we can lookup faster\r\n\t\tconversations.forEach((convo) => {\r\n\t\t\tcurrentUsers[convo.otherUser.id] = true;\r\n\t\t});\r\n\r\n\t\tconst newState = [...conversations];\r\n\t\tusers.forEach((user) => {\r\n\t\t\t// only create a fake convo if we don't already have a convo with this user\r\n\t\t\tif (!currentUsers[user.id]) {\r\n\t\t\t\tlet fakeConvo = { otherUser: user, messages: [] };\r\n\t\t\t\tnewState.push(fakeConvo);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsetConversations(newState);\r\n\t};\r\n\r\n\tconst clearSearchedUsers = () => {\r\n\t\tsetConversations((prev) => prev.filter((convo) => convo.id));\r\n\t};\r\n\r\n\tconst saveMessage = async (body) => {\r\n\t\tconst { data } = await axios.post(\"/api/messages\", body);\r\n\t\treturn data;\r\n\t};\r\n\tconst saveMessageRead = async (senderId) => {\r\n\t\tconst { data } = await axios.patch(`/api/messages/read/${senderId}`);\r\n\t\treturn data;\r\n\t};\r\n\r\n\tconst sendMessage = (data, body) => {\r\n\t\tsocket.emit(\"new-message\", {\r\n\t\t\tmessage: data.message,\r\n\t\t\trecipientId: body.recipientId,\r\n\t\t\tsender: data.sender,\r\n\t\t});\r\n\t};\r\n\tconst readMessage = (data) => {\r\n\t\tsocket.emit(\"read-messages\", {\r\n\t\t\tmessages: data.messages,\r\n\t\t\trecipientId: data.userId,\r\n\t\t\tsender: data.senderId,\r\n\t\t});\r\n\t};\r\n\tconst patchMessage = async (senderId) => {\r\n\t\ttry {\r\n\t\t\tconst data = await saveMessageRead(senderId);\r\n\t\t\tupdateReadMessagesInConvo(data);\r\n\t\t\treadMessage(data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateReadMessagesInConvo = useCallback((data) => {\r\n\t\tconst { messages } = data;\r\n\t\tconst { conversationId } = messages[0];\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.id === conversationId) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.messages = [\r\n\t\t\t\t\t\t...convoCopy.messages.slice(\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tconvoCopy.messages.length - messages.length\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...messages,\r\n\t\t\t\t\t];\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst postMessage = async (body) => {\r\n\t\ttry {\r\n\t\t\tconst data = await saveMessage(body);\r\n\t\t\tif (!body.conversationId) {\r\n\t\t\t\taddNewConvo(body.recipientId, data.message);\r\n\t\t\t} else {\r\n\t\t\t\taddMessageToConversation(data);\r\n\t\t\t}\r\n\r\n\t\t\tsendMessage(data, body);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst addNewConvo = useCallback((recipientId, message) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === recipientId) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.messages = [message];\r\n\t\t\t\t\tconvoCopy.latestMessageText = message.text;\r\n\t\t\t\t\tconvoCopy.id = message.conversationId;\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst addMessageToConversation = useCallback((data) => {\r\n\t\t// if sender isn't null, that means the message needs to be put in a brand new convo\r\n\r\n\t\tconst { message, sender = null } = data;\r\n\t\tif (sender !== null) {\r\n\t\t\tconst newConvo = {\r\n\t\t\t\tid: message.conversationId,\r\n\t\t\t\totherUser: sender,\r\n\t\t\t\tmessages: [message],\r\n\t\t\t\tlatestMessageText: message.text,\r\n\t\t\t};\r\n\r\n\t\t\tsetConversations((prev) => [newConvo, ...prev]);\r\n\t\t} else {\r\n\t\t\tsetConversations((prev) =>\r\n\t\t\t\tprev.map((convo) => {\r\n\t\t\t\t\tif (convo.id === message.conversationId) {\r\n\t\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\t\tconvoCopy.messages = [...convoCopy.messages, message];\r\n\t\t\t\t\t\tconvoCopy.latestMessageText = message.text;\r\n\t\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn convo;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst setActiveChat = (username) => {\r\n\t\tsetActiveConversation(username);\r\n\t};\r\n\r\n\tconst addOnlineUser = useCallback((id) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === id) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: true };\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst removeOfflineUser = useCallback((id) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === id) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: false };\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\t// Lifecycle\r\n\r\n\tuseEffect(() => {\r\n\t\t// Socket init\r\n\t\tsocket.on(\"add-online-user\", addOnlineUser);\r\n\t\tsocket.on(\"remove-offline-user\", removeOfflineUser);\r\n\t\tsocket.on(\"new-message\", addMessageToConversation);\r\n\t\tsocket.on(\"read-messages\", updateReadMessagesInConvo);\r\n\t\treturn () => {\r\n\t\t\t// before the component is destroyed\r\n\t\t\t// unbind all event handlers used in this component\r\n\t\t\tsocket.off(\"add-online-user\", addOnlineUser);\r\n\t\t\tsocket.off(\"remove-offline-user\", removeOfflineUser);\r\n\t\t\tsocket.off(\"new-message\", addMessageToConversation);\r\n\t\t\tsocket.off(\"read-messages\", updateReadMessagesInConvo);\r\n\t\t};\r\n\t}, [\r\n\t\taddMessageToConversation,\r\n\t\tupdateReadMessagesInConvo,\r\n\t\taddOnlineUser,\r\n\t\tremoveOfflineUser,\r\n\t\tsocket,\r\n\t]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// when fetching, prevent redirect\r\n\t\tif (user?.isFetching) return;\r\n\r\n\t\tif (user && user.id) {\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t} else {\r\n\t\t\t// If we were previously logged in, redirect to login instead of register\r\n\t\t\tif (isLoggedIn) history.push(\"/login\");\r\n\t\t\telse history.push(\"/register\");\r\n\t\t}\r\n\t}, [user, history, isLoggedIn]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchConversations = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await axios.get(\"/api/conversations\");\r\n\t\t\t\tsetConversations(data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (!user.isFetching) {\r\n\t\t\tfetchConversations();\r\n\t\t}\r\n\t}, [user]);\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tif (user && user.id) {\r\n\t\t\tawait logout(user.id);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid container component=\"main\" className={classes.root}>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<SidebarContainer\r\n\t\t\t\t\tconversations={conversations}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tclearSearchedUsers={clearSearchedUsers}\r\n\t\t\t\t\taddSearchedUsers={addSearchedUsers}\r\n\t\t\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\t\t\thandleLogout={handleLogout}\r\n\t\t\t\t/>\r\n\t\t\t\t<ActiveChat\r\n\t\t\t\t\tactiveConversation={activeConversation}\r\n\t\t\t\t\tconversations={conversations}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tpostMessage={postMessage}\r\n\t\t\t\t\tpatchMessage={patchMessage}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Button, Snackbar } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  snackbar: {\r\n    fontWeight: \"bold\",\r\n  },\r\n  icon: {\r\n    color: \"white\",\r\n  },\r\n  success: {\r\n    backgroundColor: \"green\",\r\n  },\r\n  error: {\r\n    backgroundColor: \"red\",\r\n  },\r\n}));\r\n\r\nconst SnackbarMessage = ({\r\n  setSnackBarOpen,\r\n  message,\r\n  snackBarOpen,\r\n  isError,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const icon = isError ? (\r\n    <Close color=\"secondary\" />\r\n  ) : (\r\n    <CheckCircleOutlineIcon />\r\n  );\r\n\r\n  return (\r\n    <Snackbar\r\n      open={snackBarOpen}\r\n      onClose={() => setSnackBarOpen(false)}\r\n      message={message || \"An error occurred. Please try again.\"}\r\n      action={\r\n        <React.Fragment>\r\n          <Button\r\n            className={classes.icon}\r\n            size=\"small\"\r\n            onClick={() => setSnackBarOpen(false)}\r\n          >\r\n            {icon}\r\n          </Button>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{\r\n        classes: {\r\n          root: isError ? classes.error : classes.success,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SnackbarMessage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Grid, Box, Typography, makeStyles } from \"@material-ui/core\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  successText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  errorText: {\r\n    color: \"red\",\r\n    fontSize: \"18px\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n}));\r\n\r\nconst VerifySuccess = ({ checkVerification }) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const classes = useStyles();\r\n\r\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!location.search) {\r\n      history.push(\"/\");\r\n    } else {\r\n      const token = new URLSearchParams(location.search).get(\"token\");\r\n      if (!token) {\r\n        history.push(\"/\");\r\n      } else {\r\n        checkVerification(token)\r\n          .then(() => {\r\n            setVerificationStatus(\"success\");\r\n            setTimeout(() => {\r\n              history.push(\"/\");\r\n            }, 5000); // Redirect after 5 seconds\r\n          })\r\n          .catch((error) => {\r\n            console.error(error);\r\n            setVerificationStatus(\"error\");\r\n            setTimeout(() => {\r\n              history.push(\"/\");\r\n            }, 5000); // Redirect after 5 seconds\r\n          });\r\n      }\r\n    }\r\n  }, [history, location.search, checkVerification]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box className={classes.contentContainer}>\r\n        <Grid container justifyContent=\"center\" direction=\"column\">\r\n          {verificationStatus === \"success\" ? (\r\n            <>\r\n              <Typography variant=\"body1\" className={classes.successText}>\r\n                Thank you, your account has been verified!\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                You will be redirected to the home page shortly.\r\n              </Typography>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Typography variant=\"body1\" className={classes.errorText}>\r\n                Email verification failed.\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                You will be redirected to the home page shortly.\r\n              </Typography>\r\n            </>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default VerifySuccess;\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\"; // Import the Link component\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginTop: theme.spacing(4),\r\n\t\tposition: \"relative\", // Add relative positioning\r\n\t},\r\n\tprofilePhoto: {\r\n\t\twidth: 150,\r\n\t\theight: 150,\r\n\t\tborderRadius: \"50%\",\r\n\t\tobjectFit: \"cover\",\r\n\t\tmarginBottom: theme.spacing(2),\r\n\t},\r\n\tbackButton: {\r\n\t\tposition: \"absolute\",\r\n\t\ttop: 0,\r\n\t\tleft: 30,\r\n\t\tmargin: theme.spacing(1),\r\n\t},\r\n}));\r\n\r\nconst Profile = ({ user, setUser }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst uploadPhoto = async (photoFile) => {\r\n\t\ttry {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append(\"image\", photoFile);\r\n\t\t\tconsole.log(photoFile);\r\n\t\t\t// Make the API call to upload the photo\r\n\t\t\tconst response = await axios.post(\"/api/user/update-photo\", formData);\r\n\r\n\t\t\t// Update the user object with the new photoUrl\r\n\t\t\tsetUser((prevUser) => ({\r\n\t\t\t\t...prevUser,\r\n\t\t\t\tphotoUrl: response.data.photoUrl,\r\n\t\t\t}));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\t// Handle the error here if needed\r\n\t\t}\r\n\t};\r\n\r\n\tconst handlePhotoChange = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tif (file) {\r\n\t\t\tuploadPhoto(file);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto=\"/home\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tclassName={classes.backButton}\r\n\t\t\t>\r\n\t\t\t\tBack to Home\r\n\t\t\t</Button>\r\n\t\t\t<img src={user.photoUrl} alt=\"Profile\" className={classes.profilePhoto} />\r\n\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t{user.username}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\t{user.email}\r\n\t\t\t</Typography>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tid=\"profile-photo-input\"\r\n\t\t\t\tname=\"image\"\r\n\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\tonChange={handlePhotoChange}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"profile-photo-input\">\r\n\t\t\t\t<Button component=\"span\" variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\tUpload Profile Photo\r\n\t\t\t\t</Button>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginTop: theme.spacing(4),\r\n\t\tposition: \"relative\",\r\n\t},\r\n\tbackButton: {\r\n\t\tposition: \"absolute\",\r\n\t\ttop: 0,\r\n\t\tleft: 30,\r\n\t\tmargin: theme.spacing(1),\r\n\t},\r\n}));\r\n\r\nconst Account = ({ user }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto=\"/home\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tclassName={classes.backButton}\r\n\t\t\t>\r\n\t\t\t\tBack to Home\r\n\t\t\t</Button>\r\n\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t{user.username}'s Account\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\tEmail: {user.email}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\tAccount settings and details can go here.\r\n\t\t\t</Typography>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Account;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Route, Switch, withRouter, Redirect } from \"react-router-dom\";\r\n\r\nimport Access from \"./Access.js\";\r\nimport Signup from \"./pages/Signup.js\";\r\nimport Login from \"./pages/Login.js\";\r\nimport ChangePassword from \"./pages/ChangePassword.js\";\r\nimport EmailVerification from \"./pages/EmailVerification.js\";\r\nimport RecoverPassword from \"./pages/RecoverPassword.js\";\r\nimport { SnackBarMessage, Home } from \"./components\";\r\nimport { SocketContext, socket } from \"./context/socket\";\r\nimport Verify from \"./pages/Verify.js\";\r\nimport Profile from \"./components/Profile.js\";\r\nimport Account from \"./components/Account.js\";\r\n\r\nconst Routes = (props) => {\r\n\tconst [user, setUser] = useState({\r\n\t\tisFetching: true,\r\n\t});\r\n\r\n\tconst [message, setMessage] = useState(\"\");\r\n\tconst [isError, setIsError] = useState(false);\r\n\tconst [snackBarOpen, setSnackBarOpen] = useState(false);\r\n\r\n\tconst login = async (credentials) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(\"/auth/login\", credentials);\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst register = async (credentials) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(\"/auth/register\", credentials);\r\n\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst recoverPassword = async (email) => {\r\n\t\ttry {\r\n\t\t\tawait axios.post(\"/auth/password/recover\", {\r\n\t\t\t\temail,\r\n\t\t\t});\r\n\r\n\t\t\tsetMessage(\"Recovery email sent!\");\r\n\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst recoveryChangePassword = async (token, password) => {\r\n\t\ttry {\r\n\t\t\tawait axios.post(`/auth/password/set/${token}`, {\r\n\t\t\t\tnewPassword: password,\r\n\t\t\t});\r\n\t\t\tsetMessage(\"Password changed successfully\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst resendVerification = async (user) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(`/auth/verify/resend`, { user });\r\n\t\t\tconsole.log(data);\r\n\t\t\tsetMessage(\"Verification resent!\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkVerification = async (token) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get(`/auth/verify?token=${token}`);\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsetMessage(\"Email verified successfully!\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(\"Email verification failed. Please try again.\");\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\tconst logout = async (id) => {\r\n\t\ttry {\r\n\t\t\tawait axios.delete(\"/auth/logout\");\r\n\t\t\tawait localStorage.removeItem(\"messenger-token\");\r\n\t\t\tsetUser({});\r\n\t\t\tsetMessage(\"Succesfully logged out\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t\tsocket.emit(\"logout\", id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\t// Lifecycle\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tsetUser((prev) => ({ ...prev, isFetching: true }));\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await axios.get(\"/auth/user\");\r\n\t\t\t\tsetUser(data);\r\n\t\t\t\tif (data.id) {\r\n\t\t\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t} finally {\r\n\t\t\t\tsetUser((prev) => ({ ...prev, isFetching: false }));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchUser();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (user?.error) {\r\n\t\t\t// check to make sure error is what we expect, in case we get an unexpected server error object\r\n\t\t\tif (typeof user.error === \"string\") {\r\n\t\t\t\tsetMessage(user.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetMessage(\"Internal Server Error. Please try again\");\r\n\t\t\t}\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t}, [user?.error]);\r\n\r\n\tif (user?.isFetching) {\r\n\t\treturn <div>Loading...</div>;\r\n\t}\r\n\tconsole.log(user);\r\n\treturn (\r\n\t\t<SocketContext.Provider value={socket}>\r\n\t\t\t{snackBarOpen && (\r\n\t\t\t\t<SnackBarMessage // Updated component name\r\n\t\t\t\t\tsetSnackBarOpen={setSnackBarOpen}\r\n\t\t\t\t\tmessage={message}\r\n\t\t\t\t\tsnackBarOpen={snackBarOpen}\r\n\t\t\t\t\tisError={isError} // Set this based on whether it's an error message\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/login\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/register\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\tWrappedComponent={<Signup user={user} register={register} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/verify\"\r\n\t\t\t\t\trender={() =>\r\n\t\t\t\t\t\tuser && user?.id && !user?.active ? (\r\n\t\t\t\t\t\t\t<Verify checkVerification={checkVerification} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/password-recovery\"\r\n\t\t\t\t\trender={() =>\r\n\t\t\t\t\t\tuser?.id && user?.active ? (\r\n\t\t\t\t\t\t\t<Redirect to=\"/home\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\t\tWrappedComponent={\r\n\t\t\t\t\t\t\t\t\t<RecoverPassword recoverPassword={recoverPassword} />\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/change-password\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<ChangePassword recoveryChangePassword={recoveryChangePassword} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath=\"/\"\r\n\t\t\t\t\trender={(props) =>\r\n\t\t\t\t\t\tuser?.id ? (\r\n\t\t\t\t\t\t\tuser?.active ? (\r\n\t\t\t\t\t\t\t\t<Home user={user} logout={logout} />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\t\t\tWrappedComponent={\r\n\t\t\t\t\t\t\t\t\t\t<EmailVerification\r\n\t\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\t\tresendVerification={resendVerification}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/home\"\r\n\t\t\t\t\trender={() => <Home user={user} logout={logout} />}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/profile\"\r\n\t\t\t\t\trender={() => <Profile user={user} setUser={setUser} />}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/account\"\r\n\t\t\t\t\trender={() => <Account user={user} setUser={setUser} />}\r\n\t\t\t\t/>\r\n\t\t\t</Switch>\r\n\t\t</SocketContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default withRouter(Routes);\r\n","import React from \"react\";\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport { theme } from \"./themes/theme\";\r\nimport Routes from \"./routes\";\r\nimport axios from \"axios\";\r\n\r\naxios.interceptors.request.use(async function (config) {\r\n  const token = await localStorage.getItem(\"messenger-token\");\r\n  config.headers[\"x-access-token\"] = token;\r\n\r\n  return config;\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <MuiThemeProvider theme={theme}>\r\n      <BrowserRouter>\r\n        <Routes />\r\n      </BrowserRouter>\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}