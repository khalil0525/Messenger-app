{"version":3,"sources":["themes/theme.js","Access.js","pages/Signup.js","pages/Login.js","pages/ChangePassword.js","pages/EmailVerification.js","pages/RecoverPassword.js","components/Sidebar/ChatContent.js","components/Sidebar/UserMenu.js","components/Sidebar/CurrentUser.js","components/Sidebar/Search.js","components/Sidebar/Sidebar.js","components/Sidebar/SidebarContainer.js","components/Sidebar/Chat.js","components/Sidebar/BadgeAvatar.js","components/ActiveChat/SenderBubble.js","components/ActiveChat/OtherUserBubble.js","components/ActiveChat/ActiveChat.js","components/ActiveChat/Input.js","components/ActiveChat/Header.js","components/ActiveChat/Messages.js","context/socket.js","components/Home.js","components/SnackbarMessage.js","pages/Verify.js","components/Profile.js","components/Account.js","routes.js","App.js","serviceWorker.js","index.js"],"names":["theme","createTheme","typography","fontFamily","fontSize","button","textTransform","letterSpacing","fontWeight","overrides","MuiInput","input","palette","primary","main","secondary","useStyles","makeStyles","_bgBox","root","height","bgGrid","backgroundSize","backgroundImage","backgroundRepeat","backgroundPosition","bgBox","_defineProperty","breakpoints","down","display","up","text","color","maxWidth","marginTop","textAlign","Access","_ref","WrappedComponent","classes","_jsxs","Grid","container","className","children","_jsx","item","xs","sm","md","Box","width","src","alt","Typography","variant","headerContainer","alignItems","paddingTop","flexDirection","justifyContent","headerInner","padding","alignSelf","headerContent","contentContainer","margin","whiteSpace","marginRight","formBox","welcomeText","paddingBottom","Signup","user","register","history","useHistory","_useState","useState","_useState2","_slicedToArray","formErrorMessage","setFormErrorMessage","handleRegister","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","form","formElements","username","email","password","confirmPassword","wrap","_context","prev","next","preventDefault","currentTarget","elements","value","abrupt","stop","_x","apply","arguments","useEffect","id","active","push","Button","component","Link","to","onSubmit","spacing","FormControl","fullWidth","TextField","label","name","type","required","error","inputProps","minLength","FormHelperText","size","forgotPasswordLink","textDecoration","Login","login","isButtonDisabled","setIsButtonDisabled","handleLogin","t0","finish","href","disabled","MUILink","backgroundColor","background","default","marginBottom","borderRadius","paper","boxShadow","shadows","submitButton","statusText","ChangePassword","recoveryChangePassword","setPassword","_useState3","_useState4","setConfirmPassword","_useState5","_useState6","status","setStatus","location","useLocation","token","URLSearchParams","search","get","handlePasswordChange","setTimeout","onChange","e","target","resendButton","EmailVerification","resendVerification","verificationStatus","setVerificationStatus","handleResendVerification","direction","onClick","RecoverPassword","recoverPassword","setEmail","handlePasswordRecovery","marginLeft","flexGrow","previewText","boldPreviewText","badgeRoot","badgeInner","ChatContent","_conversation$message","_conversation$message2","conversation","otherUser","latestMessageText","hasUnreadMessages","messages","length","senderId","isRead","countUnreadMessages","useMemo","filter","message","concat","Badge","badgeContent","badge","ellipsis","opacity","popper","zIndex","UserMenu","handleLogout","open","setOpen","anchorRef","useRef","handleClose","current","contains","handleListKeyDown","key","prevOpen","focus","IconButton","disableRipple","disableFocusRipple","ref","undefined","MoreHorizIcon","Popper","anchorEl","role","placement","transition","disablePortal","TransitionProps","Grow","_objectSpread","style","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","MenuItem","subContainer","CurrentUser","BadgeAvatar","photoUrl","online","filledInput","Search","handleChange","hiddenLabel","FilledInput","disableUnderline","placeholder","startAdornment","InputAdornment","position","SearchIcon","paddingLeft","paddingRight","title","Sidebar","searchTerm","_ref$conversations","conversations","setActiveChat","includes","map","Chat","SidebarContainer","clearSearchedUsers","addSearchedUsers","setSearchTerm","searchUsers","_yield$axios$get","data","axios","sent","console","_ref3","_callee2","_context2","_x2","cursor","handleClick","sidebar","profilePic","border","UserAvatar","anchorOrigin","horizontal","vertical","overlap","Avatar","date","bubble","readAvatar","SenderBubble","time","isLastReadMessage","avatar","usernameDate","OtherUserBubble","borderLeft","chatContainer","ActiveChat","obj","activeConversation","postMessage","patchMessage","find","_Fragment","Header","Messages","userId","Input","conversationId","justifySelf","setText","handleSubmit","reqBody","recipientId","sender","content","statusDot","props","getLastReadMessageId","i","moment","createdAt","format","socket","io","on","log","SocketContext","React","createContext","Home","logout","setUser","useContext","setConversations","setActiveConversation","isLoggedIn","setIsLoggedIn","saveMessage","body","_yield$axios$post","post","saveMessageRead","_yield$axios$patch","patch","sendMessage","emit","readMessage","_ref4","_callee3","_context3","updateReadMessagesInConvo","_x3","useCallback","convo","convoCopy","_toConsumableArray","slice","_ref5","_callee4","_context4","addMessageToConversation","addNewConvo","_x4","_data$sender","newConvo","addOnlineUser","removeOfflineUser","off","isFetching","fetchConversations","_ref6","_callee5","_context5","_ref7","_callee6","_context6","CssBaseline","users","currentUsers","forEach","newState","fakeConvo","snackbar","icon","success","SnackbarMessage","setSnackBarOpen","snackBarOpen","isError","Close","CheckCircleOutlineIcon","Snackbar","onClose","action","Fragment","ContentProps","successText","errorText","VerifySuccess","checkVerification","then","catch","profilePhoto","objectFit","backButton","top","left","Profile","uploadPhoto","photoFile","formData","response","FormData","append","prevUser","gutterBottom","accept","file","files","htmlFor","Account","withRouter","setMessage","setIsError","_useState7","_useState8","credentials","localStorage","setItem","_yield$axios$post2","newPassword","_x5","_yield$axios$post3","_x6","_x7","_callee7","_context7","delete","removeItem","_x8","fetchUser","_ref8","_callee8","_yield$axios$get2","_context8","Provider","SnackBarMessage","Switch","Route","path","render","Redirect","Verify","exact","interceptors","request","use","config","getItem","headers","App","MuiThemeProvider","BrowserRouter","Routes","Boolean","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.332fe00f.chunk.js","sourcesContent":["import { createTheme } from \"@material-ui/core\";\r\n\r\nexport const theme = createTheme({\r\n  typography: {\r\n    fontFamily: \"Open Sans, sans-serif\",\r\n    fontSize: 14,\r\n    button: {\r\n      textTransform: \"none\",\r\n      letterSpacing: 0,\r\n      fontWeight: \"bold\",\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiInput: {\r\n      input: {\r\n        fontWeight: \"bold\",\r\n      },\r\n    },\r\n  },\r\n  palette: {\r\n    primary: { main: \"#3A8DFF\" },\r\n    secondary: { main: \"#B0B0B0\" },\r\n  },\r\n});\r\n","import { Box, Grid, makeStyles, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  bgGrid: {\r\n    backgroundSize: \"cover\",\r\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  bgBox: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\",\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"flex\",\r\n    },\r\n\r\n    minHeight: \"100vh\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n\r\n    backgroundSize: \"cover\",\r\n    justifyContent: \"center\",\r\n    backgroundImage:\r\n      \"linear-gradient(180deg, rgb(58,141,255, 0.75) 0%, rgb(134,185,255, 0.75) 100%)\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  text: {\r\n    color: \"#ffffff\",\r\n    maxWidth: \"300px\",\r\n    marginTop: \"30px\",\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nconst Access = ({ WrappedComponent }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={false} sm={4} md={7} className={classes.bgGrid}>\r\n        <Box className={classes.bgBox}>\r\n          <img\r\n            width=\"67\"\r\n            src=\"https://res.cloudinary.com/dna1o7hrm/image/upload/v1612406581/r1hhd9ry5wxux0tqhju0.png\"\r\n            alt=\"chat bubble\"\r\n          />\r\n          <Typography variant=\"h4\" className={classes.text}>\r\n            Welcome to ChatApp\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item xs={12} sm={8} md={5}>\r\n        {WrappedComponent}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\nexport default Access;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  FormHelperText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n}));\r\n\r\nconst Signup = ({ user, register }) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [formErrorMessage, setFormErrorMessage] = useState({});\r\n\r\n  const handleRegister = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const formElements = form.elements;\r\n    const username = formElements.username.value;\r\n    const email = formElements.email.value;\r\n    const password = formElements.password.value;\r\n    const confirmPassword = formElements.confirmPassword.value;\r\n\r\n    if (password !== confirmPassword) {\r\n      setFormErrorMessage({ confirmPassword: \"Passwords must match\" });\r\n      return;\r\n    }\r\n    await register({ username, email, password });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && user.active) history.push(\"/home\");\r\n  }, [user, history]);\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && !user.active) history.push(\"/\");\r\n  }, [user, history]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to log in?\r\n              </Typography>\r\n              <Button component={Link} to=\"/login\">\r\n                Login\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Register your account\r\n            </Typography>\r\n            <form onSubmit={handleRegister} className={classes.form}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth>\r\n                    <TextField\r\n                      aria-label=\"username\"\r\n                      label=\"Username\"\r\n                      name=\"username\"\r\n                      type=\"text\"\r\n                      required\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth>\r\n                    <TextField\r\n                      label=\"E-mail address\"\r\n                      aria-label=\"e-mail address\"\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      required\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl\r\n                    error={!!formErrorMessage.confirmPassword}\r\n                    fullWidth\r\n                  >\r\n                    <TextField\r\n                      aria-label=\"password\"\r\n                      label=\"Password\"\r\n                      type=\"password\"\r\n                      inputProps={{ minLength: 6 }}\r\n                      name=\"password\"\r\n                      required\r\n                    />\r\n                    <FormHelperText>\r\n                      {formErrorMessage.confirmPassword}\r\n                    </FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl\r\n                    error={!!formErrorMessage.confirmPassword}\r\n                    fullWidth\r\n                  >\r\n                    <TextField\r\n                      label=\"Confirm Password\"\r\n                      aria-label=\"confirm password\"\r\n                      type=\"password\"\r\n                      inputProps={{ minLength: 6 }}\r\n                      name=\"confirmPassword\"\r\n                      required\r\n                    />\r\n                    <FormHelperText>\r\n                      {formErrorMessage.confirmPassword}\r\n                    </FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    fullWidth\r\n                  >\r\n                    Create\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport {\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n  Link as MUILink,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  forgotPasswordLink: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.primary.main,\r\n    textDecoration: \"none\", // Remove underline\r\n    \"&:hover\": {\r\n      textDecoration: \"underline\", // Add underline on hover\r\n    },\r\n  },\r\n}));\r\n\r\nconst Login = ({ user, login }) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const formElements = form.elements;\r\n    const username = formElements.username.value;\r\n    const password = formElements.password.value;\r\n\r\n    setIsButtonDisabled(true); // Disable the button while waiting for the response\r\n\r\n    try {\r\n      await login({ username, password });\r\n    } catch (error) {\r\n      // Handle the error, if needed\r\n    } finally {\r\n      setIsButtonDisabled(false); // Enable the button after the API response\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (user && user.id && user.active) history.push(\"/home\");\r\n  }, [user, history]);\r\n\r\n  useEffect(() => {\r\n    if (user && user.id && !user.active) history.push(\"/\");\r\n  }, [user, history]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container item className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to register?\r\n              </Typography>\r\n              <Link href=\"/register\" to=\"/register\">\r\n                <Button>Register</Button>\r\n              </Link>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Welcome Back!\r\n            </Typography>\r\n\r\n            <form onSubmit={handleLogin} className={classes.form}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl margin=\"normal\" required fullWidth>\r\n                    <TextField\r\n                      aria-label=\"username\"\r\n                      label=\"Username\"\r\n                      name=\"username\"\r\n                      type=\"text\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <FormControl margin=\"normal\" required fullWidth>\r\n                    <TextField\r\n                      label=\"Password\"\r\n                      aria-label=\"password\"\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    disabled={isButtonDisabled}\r\n                    fullWidth\r\n                  >\r\n                    Login\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <MUILink\r\n                    component={Link}\r\n                    to=\"/password-recovery\"\r\n                    className={classes.forgotPasswordLink}\r\n                  >\r\n                    Forgot your password?\r\n                  </MUILink>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useLocation, useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.default,\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: theme.palette.primary.main,\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    maxWidth: \"400px\",\r\n    padding: theme.spacing(3),\r\n    borderRadius: theme.spacing(1),\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[3],\r\n  },\r\n  submitButton: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  statusText: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.error.main,\r\n  },\r\n}));\r\n\r\nconst ChangePassword = ({ recoveryChangePassword }) => {\r\n  const classes = useStyles();\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  const location = useLocation();\r\n  const token = new URLSearchParams(location.search).get(\"token\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handlePasswordChange = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (password !== confirmPassword) {\r\n      setStatus(\"Passwords do not match. Please try again.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await recoveryChangePassword(token, password);\r\n      setStatus(\"Password changed successfully.\");\r\n      setTimeout(() => {\r\n        history.push(\"/\");\r\n      }, 3000); // Redirect after 3 seconds\r\n    } catch (error) {\r\n      setStatus(\"Failed to change password.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <div className={classes.form}>\r\n        <Typography variant=\"h4\" className={classes.welcomeText}>\r\n          Change Password\r\n        </Typography>\r\n        <form onSubmit={handlePasswordChange}>\r\n          <FormControl margin=\"normal\" required>\r\n            <TextField\r\n              label=\"New Password\"\r\n              aria-label=\"new-password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              fullWidth\r\n            />\r\n          </FormControl>\r\n          <FormControl margin=\"normal\" required>\r\n            <TextField\r\n              label=\"Confirm Password\"\r\n              aria-label=\"confirm-password\"\r\n              type=\"password\"\r\n              value={confirmPassword}\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n              fullWidth\r\n            />\r\n          </FormControl>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submitButton}\r\n            fullWidth\r\n          >\r\n            Change Password\r\n          </Button>\r\n        </form>\r\n        <Typography variant=\"body2\" className={classes.statusText}>\r\n          {status}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { Grid, Box, Typography, Button, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  resendButton: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst EmailVerification = ({ user, resendVerification }) => {\r\n  const classes = useStyles();\r\n\r\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\r\n\r\n  const handleResendVerification = async () => {\r\n    try {\r\n      await resendVerification(user); // Implement this function to send a new verification link\r\n      setVerificationStatus(\"Verification link resent! Check your email.\");\r\n    } catch (error) {\r\n      setVerificationStatus(\"Failed to resend verification link.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box className={classes.contentContainer}>\r\n        <Grid container justifyContent=\"center\" direction=\"column\">\r\n          <Typography variant=\"body1\" className={classes.welcomeText}>\r\n            You must verify your email to access the application.\r\n          </Typography>\r\n          <Typography variant=\"body2\">{verificationStatus}</Typography>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.resendButton}\r\n            onClick={handleResendVerification}\r\n          >\r\n            Resend Verification Link\r\n          </Button>\r\n        </Grid>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default EmailVerification;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Button,\r\n  FormControl,\r\n  TextField,\r\n  makeStyles,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n\r\n  headerContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-start\",\r\n    paddingTop: \"23px\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  headerInner: {\r\n    padding: \"8px\",\r\n    alignSelf: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  text: {\r\n    color: \"#b0b0b0\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"400\",\r\n    whiteSpace: \"nowrap\",\r\n    marginRight: \"21px\",\r\n  },\r\n  formBox: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n\r\n  statusText: {\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.text.secondary,\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nconst RecoverPassword = ({ recoverPassword }) => {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const history = useHistory();\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false); // New state for button disabling\r\n\r\n  const handlePasswordRecovery = async (event) => {\r\n    event.preventDefault();\r\n\r\n    setIsButtonDisabled(true); // Disable the button while waiting for the API response\r\n\r\n    try {\r\n      await recoverPassword(email);\r\n      setStatus(\"Password recovery instructions sent to your email.\");\r\n      setTimeout(() => {\r\n        history.push(\"/login\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      setStatus(\"Failed to initiate password recovery.\");\r\n    } finally {\r\n      setIsButtonDisabled(false); // Enable the button after API response\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box>\r\n        <Box container className={classes.headerContainer}>\r\n          <Box className={classes.headerInner}>\r\n            <Box className={classes.headerContent}>\r\n              <Typography variant=\"body1\" className={classes.text}>\r\n                Need to log in?\r\n              </Typography>\r\n              <Button component={Link} to=\"/login\">\r\n                Login\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n        <Box className={classes.contentContainer}>\r\n          <Grid\r\n            container\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            className={classes.formBox}\r\n          >\r\n            <Typography variant=\"h4\" className={classes.welcomeText}>\r\n              Recover Password\r\n            </Typography>\r\n            <form className={classes.form} onSubmit={handlePasswordRecovery}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <FormControl fullWidth margin=\"normal\" required>\r\n                    <TextField\r\n                      label=\"Email\"\r\n                      aria-label=\"email\"\r\n                      type=\"email\"\r\n                      variant=\"outlined\"\r\n                      value={email}\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    fullWidth\r\n                    disabled={isButtonDisabled}\r\n                  >\r\n                    Send Recovery Email\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n          <Typography variant=\"body2\" className={classes.statusText}>\r\n            {status}\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default RecoverPassword;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box, Typography, Badge } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginLeft: 20,\r\n    flexGrow: 1,\r\n  },\r\n  username: {\r\n    fontWeight: \"bold\",\r\n    letterSpacing: -0.2,\r\n  },\r\n  previewText: {\r\n    fontSize: 12,\r\n    color: \"#9CADC8\",\r\n    letterSpacing: -0.17,\r\n  },\r\n  boldPreviewText: {\r\n    color: \"black\",\r\n    fontWeight: \"600\",\r\n  },\r\n  badgeRoot: {\r\n    alignSelf: \"center\",\r\n    marginRight: 40,\r\n  },\r\n  badgeInner: {\r\n    backgroundColor: \"#3F92FF\",\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst ChatContent = ({ conversation }) => {\r\n  const classes = useStyles();\r\n\r\n  const { otherUser } = conversation;\r\n  const latestMessageText = conversation.id && conversation.latestMessageText;\r\n\r\n  const hasUnreadMessages =\r\n    conversation.messages[conversation.messages.length - 1]?.senderId ===\r\n      otherUser.id &&\r\n    !conversation.messages[conversation.messages.length - 1]?.isRead;\r\n\r\n  const countUnreadMessages = useMemo(() => {\r\n    if (hasUnreadMessages) {\r\n      return conversation.messages.filter((message) => !message.isRead).length;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }, [conversation.messages, hasUnreadMessages]);\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box>\r\n        <Typography className={classes.username}>\r\n          {otherUser.username}\r\n        </Typography>\r\n        <Typography\r\n          className={`${hasUnreadMessages && classes.boldPreviewText} ${\r\n            classes.previewText\r\n          }`}\r\n        >\r\n          {latestMessageText}\r\n        </Typography>\r\n      </Box>\r\n      <Badge\r\n        badgeContent={countUnreadMessages}\r\n        classes={{ root: classes.badgeRoot, badge: classes.badgeInner }}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ChatContent;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport {\r\n\tClickAwayListener,\r\n\tGrow,\r\n\tPaper,\r\n\tPopper,\r\n\tMenuItem,\r\n\tMenuList,\r\n\tBox,\r\n\tIconButton,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\nimport { Link } from \"react-router-dom\"; // Import Link from React Router\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\tellipsis: {\r\n\t\tcolor: \"#95A7C4\",\r\n\t\tmarginRight: 24,\r\n\t\topacity: 0.9,\r\n\t},\r\n\t// Add a higher z-index value\r\n\tpopper: {\r\n\t\tzIndex: 1000,\r\n\t\t// Adjust this value as needed\r\n\t\tmarginRight: \"8px\", // Adjust this value as needed\r\n\t},\r\n}));\r\n\r\nexport default function UserMenu({ handleLogout }) {\r\n\tconst classes = useStyles();\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst anchorRef = useRef();\r\n\r\n\tconst handleToggle = () => {\r\n\t\tsetOpen((prevOpen) => !prevOpen);\r\n\t};\r\n\r\n\tconst handleClose = (event) => {\r\n\t\tif (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetOpen(false);\r\n\t};\r\n\r\n\tfunction handleListKeyDown(event) {\r\n\t\tif (event.key === \"Tab\") {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tsetOpen(false);\r\n\t\t} else if (event.key === \"Escape\") {\r\n\t\t\tsetOpen(false);\r\n\t\t}\r\n\t}\r\n\r\n\tconst prevOpen = useRef(open);\r\n\tuseEffect(() => {\r\n\t\tif (prevOpen.current === true && open === false) {\r\n\t\t\tanchorRef.current.focus();\r\n\t\t}\r\n\r\n\t\tprevOpen.current = open;\r\n\t}, [open]);\r\n\r\n\treturn (\r\n\t\t<Box\r\n\t\t\tdisplay=\"flex\"\r\n\t\t\talignItems=\"center\"\r\n\t\t\tspacing={2}\r\n\t\t\tclassName={classes.root}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tdisableFocusRipple\r\n\t\t\t\t\tref={anchorRef}\r\n\t\t\t\t\tid=\"composition-button\"\r\n\t\t\t\t\taria-controls={open ? \"composition-menu\" : undefined}\r\n\t\t\t\t\taria-expanded={open ? \"true\" : undefined}\r\n\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\tonClick={handleToggle}\r\n\t\t\t\t>\r\n\t\t\t\t\t<MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<Popper\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tanchorEl={anchorRef.current}\r\n\t\t\t\t\trole={undefined}\r\n\t\t\t\t\tplacement=\"bottom-start\"\r\n\t\t\t\t\ttransition\r\n\t\t\t\t\tdisablePortal\r\n\t\t\t\t\t// Add the custom class for z-index\r\n\t\t\t\t\tclassName={classes.popper}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ TransitionProps, placement }) => (\r\n\t\t\t\t\t\t<Grow\r\n\t\t\t\t\t\t\t{...TransitionProps}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\ttransformOrigin:\r\n\t\t\t\t\t\t\t\t\tplacement === \"bottom-start\" ? \"left top\" : \"left bottom\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Paper>\r\n\t\t\t\t\t\t\t\t<ClickAwayListener onClickAway={handleClose}>\r\n\t\t\t\t\t\t\t\t\t<MenuList\r\n\t\t\t\t\t\t\t\t\t\tautoFocusItem={open}\r\n\t\t\t\t\t\t\t\t\t\tid=\"composition-menu\"\r\n\t\t\t\t\t\t\t\t\t\taria-labelledby=\"composition-button\"\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleListKeyDown}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\tcomponent={Link}\r\n\t\t\t\t\t\t\t\t\t\t\tto=\"/account\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tMy account\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem onClick={() => handleLogout()}>Logout</MenuItem>\r\n\t\t\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t\t\t</ClickAwayListener>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Grow>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Popper>\r\n\t\t\t</div>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { BadgeAvatar } from \"./index\";\r\n\r\nimport UserMenu from \"./UserMenu\";\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\theight: 44,\r\n\t\tmarginTop: 23,\r\n\t\tmarginLeft: 6,\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tsubContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tusername: {\r\n\t\tletterSpacing: -0.23,\r\n\t\tfontSize: 16,\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginLeft: 17,\r\n\t},\r\n\tellipsis: {\r\n\t\tcolor: \"#95A7C4\",\r\n\t\tmarginRight: 24,\r\n\t\topacity: 0.5,\r\n\t},\r\n}));\r\n\r\nconst CurrentUser = ({ user, handleLogout }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<BadgeAvatar photoUrl={user?.photoUrl} online={true} />\r\n\t\t\t<Box className={classes.subContainer}>\r\n\t\t\t\t<Typography className={classes.username}>{user?.username}</Typography>\r\n\r\n\t\t\t\t<UserMenu handleLogout={handleLogout} />\r\n\t\t\t</Box>\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default CurrentUser;\r\n","import React from \"react\";\r\nimport { FormControl, FilledInput, InputAdornment } from \"@material-ui/core\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  filledInput: {\r\n    height: 50,\r\n    background: \"#E9EEF9\",\r\n    borderRadius: 5,\r\n    fontSize: 13,\r\n    fontWeight: \"bold\",\r\n    color: \"#99A9C4\",\r\n    letterSpacing: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    marginBottom: 20,\r\n  },\r\n  input: {\r\n    \"&::placeholder\": {\r\n      color: \"#ADC0DE\",\r\n      opacity: 1,\r\n    },\r\n  },\r\n}));\r\n\r\nconst Search = ({ handleChange }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <FormControl fullWidth hiddenLabel>\r\n        <FilledInput\r\n          name=\"search\"\r\n          onChange={handleChange}\r\n          classes={{ root: classes.filledInput, input: classes.input }}\r\n          disableUnderline\r\n          placeholder=\"Search\"\r\n          startAdornment={\r\n            <InputAdornment position=\"start\">\r\n              <SearchIcon />\r\n            </InputAdornment>\r\n          }\r\n        ></FilledInput>\r\n      </FormControl>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Search, Chat, CurrentUser } from \"./index\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tpaddingLeft: 21,\r\n\t\tpaddingRight: 21,\r\n\t\tflexGrow: 1,\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 20,\r\n\t\tletterSpacing: -0.29,\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginTop: 32,\r\n\t\tmarginBottom: 15,\r\n\t},\r\n}));\r\n\r\nconst Sidebar = ({\r\n\thandleChange,\r\n\tsearchTerm,\r\n\tconversations = [],\r\n\tuser,\r\n\tsetActiveChat,\r\n\thandleLogout,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t<CurrentUser user={user} handleLogout={handleLogout} />\r\n\t\t\t<Typography className={classes.title}>Chats</Typography>\r\n\t\t\t<Search handleChange={handleChange} />\r\n\t\t\t{conversations\r\n\t\t\t\t.filter((conversation) =>\r\n\t\t\t\t\tconversation.otherUser.username.includes(searchTerm)\r\n\t\t\t\t)\r\n\t\t\t\t.map((conversation) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Chat\r\n\t\t\t\t\t\t\tconversation={conversation}\r\n\t\t\t\t\t\t\tkey={conversation.otherUser.username}\r\n\t\t\t\t\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default Sidebar;\r\n","import React, { useState } from \"react\";\r\nimport { Sidebar } from \"./index\";\r\nimport axios from \"axios\";\r\n\r\nconst SidebarContainer = ({\r\n\tconversations,\r\n\tuser,\r\n\tclearSearchedUsers,\r\n\taddSearchedUsers,\r\n\tsetActiveChat,\r\n\thandleLogout,\r\n}) => {\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n\tconst searchUsers = async (searchTerm) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get(`/api/users/${searchTerm}`);\r\n\t\t\taddSearchedUsers(data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleChange = async (event) => {\r\n\t\tif (event.target.value === \"\") {\r\n\t\t\t// clear searched convos\r\n\t\t\tclearSearchedUsers();\r\n\t\t\tsetSearchTerm(\"\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (searchTerm.includes(event.target.value)) {\r\n\t\t\t// if new value is included in search term, we don't need to make another API call, just need to set the search term value so the conversations can be filtered in the rendering\r\n\t\t\tsetSearchTerm(event.target.value);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait searchUsers(event.target.value);\r\n\t\tsetSearchTerm(event.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Sidebar\r\n\t\t\thandleChange={handleChange}\r\n\t\t\tsearchTerm={searchTerm}\r\n\t\t\tconversations={conversations}\r\n\t\t\tuser={user}\r\n\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\thandleLogout={handleLogout}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default SidebarContainer;\r\n","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { BadgeAvatar, ChatContent } from \"../Sidebar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: 8,\r\n    height: 80,\r\n    boxShadow: \"0 2px 10px 0 rgba(88,133,196,0.05)\",\r\n    marginBottom: 10,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      cursor: \"grab\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Chat = ({ conversation, setActiveChat }) => {\r\n  const classes = useStyles();\r\n  const { otherUser } = conversation;\r\n\r\n  const handleClick = async (conversation) => {\r\n    await setActiveChat(conversation.otherUser.username);\r\n  };\r\n\r\n  return (\r\n    <Box onClick={() => handleClick(conversation)} className={classes.root}>\r\n      <BadgeAvatar\r\n        photoUrl={otherUser.photoUrl}\r\n        username={otherUser.username}\r\n        online={otherUser.online}\r\n        sidebar={true}\r\n      />\r\n      <ChatContent conversation={conversation} />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Box, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  profilePic: {\r\n    height: 44,\r\n    width: 44,\r\n  },\r\n  badge: {\r\n    height: 13,\r\n    width: 13,\r\n    borderRadius: \"50%\",\r\n    border: \"2px solid white\",\r\n    backgroundColor: \"#D0DAE9\",\r\n  },\r\n  online: {\r\n    backgroundColor: \"#1CED84\",\r\n  },\r\n  sidebar: {\r\n    marginLeft: 17,\r\n  },\r\n}));\r\n\r\nconst UserAvatar = ({ sidebar, username, photoUrl, online }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={sidebar ? classes.sidebar : \"\"}>\r\n      <Badge\r\n        classes={{ badge: `${classes.badge} ${online && classes.online}` }}\r\n        variant=\"dot\"\r\n        anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\r\n        overlap=\"circular\"\r\n      >\r\n        <Avatar alt={username} src={photoUrl} className={classes.profilePic} />\r\n      </Badge>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UserAvatar;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"flex-end\",\r\n  },\r\n  date: {\r\n    fontSize: 11,\r\n    color: \"#BECCE2\",\r\n    fontWeight: \"bold\",\r\n    marginBottom: 5,\r\n  },\r\n  text: {\r\n    fontSize: 14,\r\n    color: \"#91A3C0\",\r\n    letterSpacing: -0.2,\r\n    padding: 8,\r\n    fontWeight: \"bold\",\r\n  },\r\n  bubble: {\r\n    background: \"#F4F6FA\",\r\n    borderRadius: \"10px 10px 0 10px\",\r\n  },\r\n  readAvatar: {\r\n    height: 20,\r\n    width: 20,\r\n    marginTop: 9,\r\n  },\r\n}));\r\n\r\nconst SenderBubble = ({ time, text, otherUser, isLastReadMessage }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Typography className={classes.date}>{time}</Typography>\r\n      <Box className={classes.bubble}>\r\n        <Typography className={classes.text}>{text}</Typography>\r\n      </Box>\r\n      {isLastReadMessage && (\r\n        <Avatar\r\n          alt={otherUser.username}\r\n          src={otherUser.photoUrl}\r\n          className={classes.readAvatar}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SenderBubble;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  avatar: {\r\n    height: 30,\r\n    width: 30,\r\n    marginRight: 11,\r\n    marginTop: 6,\r\n  },\r\n  usernameDate: {\r\n    fontSize: 11,\r\n    color: \"#BECCE2\",\r\n    fontWeight: \"bold\",\r\n    marginBottom: 5,\r\n  },\r\n  bubble: {\r\n    backgroundImage: \"linear-gradient(225deg, #6CC1FF 0%, #3A8DFF 100%)\",\r\n    borderRadius: \"0 10px 10px 10px\",\r\n  },\r\n  text: {\r\n    fontSize: 14,\r\n    fontWeight: \"bold\",\r\n    color: \"#FFFFFF\",\r\n    letterSpacing: -0.2,\r\n    padding: 8,\r\n  },\r\n}));\r\n\r\nconst OtherUserBubble = ({ text, time, otherUser }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Avatar\r\n        alt={otherUser.username}\r\n        src={otherUser.photoUrl}\r\n        className={classes.avatar}\r\n      />\r\n      <Box>\r\n        <Typography className={classes.usernameDate}>\r\n          {otherUser.username} {time}\r\n        </Typography>\r\n        <Box className={classes.bubble}>\r\n          <Typography className={classes.text}>{text}</Typography>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OtherUserBubble;\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Input, Header, Messages } from \"./index\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexGrow: 8,\r\n\t\tflexDirection: \"column\",\r\n\t\tborderLeft: \"1px solid grey\",\r\n\t},\r\n\tchatContainer: {\r\n\t\tmarginLeft: 41,\r\n\t\tmarginRight: 41,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tflexGrow: 1,\r\n\t\tjustifyContent: \"space-between\",\r\n\t},\r\n}));\r\n\r\nconst ActiveChat = ({\r\n\tuser,\r\n\tconversations,\r\n\tactiveConversation,\r\n\tpostMessage,\r\n\tpatchMessage,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst conversation = useMemo(() => {\r\n\t\treturn conversations\r\n\t\t\t? conversations.find(\r\n\t\t\t\t\t(conversation) =>\r\n\t\t\t\t\t\tconversation.otherUser.username === activeConversation\r\n\t\t\t  )\r\n\t\t\t: {};\r\n\t}, [conversations, activeConversation]);\r\n\r\n\tconst isConversation = (obj) => {\r\n\t\treturn obj !== {} && obj !== undefined;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { senderId, isRead } =\r\n\t\t\tconversation?.messages[conversation.messages.length - 1] || {};\r\n\t\tif (\r\n\t\t\tconversation &&\r\n\t\t\tconversation.otherUser &&\r\n\t\t\tsenderId === conversation.otherUser.id &&\r\n\t\t\t!isRead\r\n\t\t) {\r\n\t\t\tpatchMessage(senderId);\r\n\t\t}\r\n\t}, [conversation, patchMessage]);\r\n\r\n\treturn (\r\n\t\t<Box className={classes.root}>\r\n\t\t\t{isConversation(conversation) && conversation.otherUser && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tusername={conversation.otherUser.username}\r\n\t\t\t\t\t\tonline={conversation.otherUser.online || false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Box className={classes.chatContainer}>\r\n\t\t\t\t\t\t{user && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\t\t\tmessages={conversation.messages}\r\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\r\n\t\t\t\t\t\t\t\t\tuserId={user.id}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\totherUser={conversation.otherUser}\r\n\t\t\t\t\t\t\t\t\tconversationId={conversation.id || null}\r\n\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\tpostMessage={postMessage}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nexport default ActiveChat;\r\n","import React, { useState } from \"react\";\r\nimport { FormControl, FilledInput } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    justifySelf: \"flex-end\",\r\n    marginTop: 15,\r\n  },\r\n  input: {\r\n    height: 70,\r\n    backgroundColor: \"#F4F6FA\",\r\n    borderRadius: 8,\r\n    marginBottom: 20,\r\n  },\r\n}));\r\n\r\nconst Input = ({ otherUser, conversationId, user, postMessage }) => {\r\n  const classes = useStyles();\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const handleChange = (event) => {\r\n    setText(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const form = event.currentTarget;\r\n    const formElements = form.elements;\r\n    // add sender user info if posting to a brand new convo, so that the other user will have access to username, profile pic, etc.\r\n    const reqBody = {\r\n      text: formElements.text.value,\r\n      recipientId: otherUser.id,\r\n      conversationId,\r\n      sender: conversationId ? null : user,\r\n    };\r\n    await postMessage(reqBody);\r\n    setText(\"\");\r\n  };\r\n\r\n  return (\r\n    <form className={classes.root} onSubmit={handleSubmit}>\r\n      <FormControl fullWidth hiddenLabel>\r\n        <FilledInput\r\n          classes={{ root: classes.input }}\r\n          disableUnderline\r\n          placeholder=\"Type something...\"\r\n          value={text}\r\n          name=\"text\"\r\n          onChange={handleChange}\r\n        />\r\n      </FormControl>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    height: 89,\r\n    marginBottom: 34,\r\n    boxShadow: \"0 2px 20px 0 rgba(88,133,196,0.10)\",\r\n  },\r\n  content: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginLeft: 24,\r\n  },\r\n  username: {\r\n    fontSize: 20,\r\n    letterSpacing: -0.29,\r\n    fontWeight: \"bold\",\r\n    marginRight: 14,\r\n  },\r\n  statusText: {\r\n    fontSize: 12,\r\n    color: \"#BFC9DB\",\r\n    letterSpacing: -0.17,\r\n  },\r\n  statusDot: {\r\n    height: 8,\r\n    width: 8,\r\n    borderRadius: \"50%\",\r\n    marginRight: 5,\r\n    backgroundColor: \"#D0DAE9\",\r\n  },\r\n  online: {\r\n    background: \"#1CED84\",\r\n  },\r\n  ellipsis: {\r\n    color: \"#95A7C4\",\r\n    marginRight: 24,\r\n    opacity: 0.5,\r\n  },\r\n}));\r\n\r\nconst Header = ({ username, online }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={classes.root}>\r\n      <Box className={classes.content}>\r\n        <Typography className={classes.username}>{username}</Typography>\r\n        <Box className={`${classes.statusDot} ${online && classes.online}`} />\r\n        <Typography className={classes.statusText}>\r\n          {online ? \"Online\" : \"Offline\"}\r\n        </Typography>\r\n      </Box>\r\n      <MoreHorizIcon classes={{ root: classes.ellipsis }} />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { SenderBubble, OtherUserBubble } from \".\";\r\nimport moment from \"moment\";\r\n\r\nconst Messages = (props) => {\r\n  const { messages, otherUser, userId } = props;\r\n\r\n  const getLastReadMessageId = useMemo(() => {\r\n    for (let i = messages.length - 1; i >= 0; i--) {\r\n      if (messages[i].isRead && messages[i].senderId === userId) {\r\n        return messages[i].id;\r\n      }\r\n    }\r\n    return 0;\r\n  }, [messages, userId]);\r\n\r\n  return (\r\n    <Box>\r\n      {messages.map((message) => {\r\n        const time = moment(message.createdAt).format(\"h:mm\");\r\n\r\n        return message.senderId === userId ? (\r\n          <SenderBubble\r\n            key={message.id}\r\n            text={message.text}\r\n            time={time}\r\n            otherUser={otherUser}\r\n            isLastReadMessage={getLastReadMessageId === message.id}\r\n          />\r\n        ) : (\r\n          <OtherUserBubble\r\n            key={message.id}\r\n            text={message.text}\r\n            time={time}\r\n            otherUser={otherUser}\r\n          />\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n","import { io } from \"socket.io-client\";\r\n\r\nimport React from \"react\";\r\n\r\nexport const socket = io(\"http://ec2-54-224-72-128.compute-1.amazonaws.com/\");\r\nsocket.on(\"connect\", () => {\r\n\tconsole.log(\"connected to server\");\r\n});\r\nexport const SocketContext = React.createContext();\r\n","import React, { useCallback, useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Grid, CssBaseline } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { SidebarContainer } from \"../components/Sidebar\";\r\nimport { ActiveChat } from \"../components/ActiveChat\";\r\nimport { SocketContext } from \"../context/socket\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\theight: \"100vh\",\r\n\t},\r\n}));\r\n\r\nconst Home = ({ user, logout, setUser }) => {\r\n\tconst history = useHistory();\r\n\r\n\tconst socket = useContext(SocketContext);\r\n\r\n\tconst [conversations, setConversations] = useState([]);\r\n\tconst [activeConversation, setActiveConversation] = useState(null);\r\n\r\n\tconst classes = useStyles();\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tconst addSearchedUsers = (users) => {\r\n\t\tconst currentUsers = {};\r\n\r\n\t\t// make table of current users so we can lookup faster\r\n\t\tconversations.forEach((convo) => {\r\n\t\t\tcurrentUsers[convo.otherUser.id] = true;\r\n\t\t});\r\n\r\n\t\tconst newState = [...conversations];\r\n\t\tusers.forEach((user) => {\r\n\t\t\t// only create a fake convo if we don't already have a convo with this user\r\n\t\t\tif (!currentUsers[user.id]) {\r\n\t\t\t\tlet fakeConvo = { otherUser: user, messages: [] };\r\n\t\t\t\tnewState.push(fakeConvo);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsetConversations(newState);\r\n\t};\r\n\r\n\tconst clearSearchedUsers = () => {\r\n\t\tsetConversations((prev) => prev.filter((convo) => convo.id));\r\n\t};\r\n\r\n\tconst saveMessage = async (body) => {\r\n\t\tconst { data } = await axios.post(\"/api/messages\", body);\r\n\t\treturn data;\r\n\t};\r\n\tconst saveMessageRead = async (senderId) => {\r\n\t\tconst { data } = await axios.patch(`/api/messages/read/${senderId}`);\r\n\t\treturn data;\r\n\t};\r\n\r\n\tconst sendMessage = (data, body) => {\r\n\t\tsocket.emit(\"new-message\", {\r\n\t\t\tmessage: data.message,\r\n\t\t\trecipientId: body.recipientId,\r\n\t\t\tsender: data.sender,\r\n\t\t});\r\n\t};\r\n\tconst readMessage = (data) => {\r\n\t\tsocket.emit(\"read-messages\", {\r\n\t\t\tmessages: data.messages,\r\n\t\t\trecipientId: data.userId,\r\n\t\t\tsender: data.senderId,\r\n\t\t});\r\n\t};\r\n\tconst patchMessage = async (senderId) => {\r\n\t\ttry {\r\n\t\t\tconst data = await saveMessageRead(senderId);\r\n\t\t\tupdateReadMessagesInConvo(data);\r\n\t\t\treadMessage(data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateReadMessagesInConvo = useCallback((data) => {\r\n\t\tconst { messages } = data;\r\n\t\tconst { conversationId } = messages[0];\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.id === conversationId) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.messages = [\r\n\t\t\t\t\t\t...convoCopy.messages.slice(\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tconvoCopy.messages.length - messages.length\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...messages,\r\n\t\t\t\t\t];\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst postMessage = async (body) => {\r\n\t\ttry {\r\n\t\t\tconst data = await saveMessage(body);\r\n\t\t\tif (!body.conversationId) {\r\n\t\t\t\taddNewConvo(body.recipientId, data.message);\r\n\t\t\t} else {\r\n\t\t\t\taddMessageToConversation(data);\r\n\t\t\t}\r\n\r\n\t\t\tsendMessage(data, body);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst addNewConvo = useCallback((recipientId, message) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === recipientId) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.messages = [message];\r\n\t\t\t\t\tconvoCopy.latestMessageText = message.text;\r\n\t\t\t\t\tconvoCopy.id = message.conversationId;\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst addMessageToConversation = useCallback((data) => {\r\n\t\t// if sender isn't null, that means the message needs to be put in a brand new convo\r\n\r\n\t\tconst { message, sender = null } = data;\r\n\t\tif (sender !== null) {\r\n\t\t\tconst newConvo = {\r\n\t\t\t\tid: message.conversationId,\r\n\t\t\t\totherUser: sender,\r\n\t\t\t\tmessages: [message],\r\n\t\t\t\tlatestMessageText: message.text,\r\n\t\t\t};\r\n\r\n\t\t\tsetConversations((prev) => [newConvo, ...prev]);\r\n\t\t} else {\r\n\t\t\tsetConversations((prev) =>\r\n\t\t\t\tprev.map((convo) => {\r\n\t\t\t\t\tif (convo.id === message.conversationId) {\r\n\t\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\t\tconvoCopy.messages = [...convoCopy.messages, message];\r\n\t\t\t\t\t\tconvoCopy.latestMessageText = message.text;\r\n\t\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn convo;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst setActiveChat = (username) => {\r\n\t\tsetActiveConversation(username);\r\n\t};\r\n\r\n\tconst addOnlineUser = useCallback((id) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === id) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: true };\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst removeOfflineUser = useCallback((id) => {\r\n\t\tsetConversations((prev) =>\r\n\t\t\tprev.map((convo) => {\r\n\t\t\t\tif (convo.otherUser.id === id) {\r\n\t\t\t\t\tconst convoCopy = { ...convo };\r\n\t\t\t\t\tconvoCopy.otherUser = { ...convoCopy.otherUser, online: false };\r\n\t\t\t\t\treturn convoCopy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn convo;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\t// Lifecycle\r\n\r\n\tuseEffect(() => {\r\n\t\t// Socket init\r\n\t\tsocket.on(\"add-online-user\", addOnlineUser);\r\n\t\tsocket.on(\"remove-offline-user\", removeOfflineUser);\r\n\t\tsocket.on(\"new-message\", addMessageToConversation);\r\n\t\tsocket.on(\"read-messages\", updateReadMessagesInConvo);\r\n\t\treturn () => {\r\n\t\t\t// before the component is destroyed\r\n\t\t\t// unbind all event handlers used in this component\r\n\t\t\tsocket.off(\"add-online-user\", addOnlineUser);\r\n\t\t\tsocket.off(\"remove-offline-user\", removeOfflineUser);\r\n\t\t\tsocket.off(\"new-message\", addMessageToConversation);\r\n\t\t\tsocket.off(\"read-messages\", updateReadMessagesInConvo);\r\n\t\t};\r\n\t}, [\r\n\t\taddMessageToConversation,\r\n\t\tupdateReadMessagesInConvo,\r\n\t\taddOnlineUser,\r\n\t\tremoveOfflineUser,\r\n\t\tsocket,\r\n\t]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// when fetching, prevent redirect\r\n\t\tif (user?.isFetching) return;\r\n\r\n\t\tif (user && user.id) {\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t} else {\r\n\t\t\t// If we were previously logged in, redirect to login instead of register\r\n\t\t\tif (isLoggedIn) history.push(\"/login\");\r\n\t\t\telse history.push(\"/register\");\r\n\t\t}\r\n\t}, [user, history, isLoggedIn]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchConversations = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await axios.get(\"/api/conversations\");\r\n\t\t\t\tsetConversations(data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (!user.isFetching) {\r\n\t\t\tfetchConversations();\r\n\t\t}\r\n\t}, [user]);\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tif (user && user.id) {\r\n\t\t\tawait logout(user.id);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid container component=\"main\" className={classes.root}>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<SidebarContainer\r\n\t\t\t\t\tconversations={conversations}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tclearSearchedUsers={clearSearchedUsers}\r\n\t\t\t\t\taddSearchedUsers={addSearchedUsers}\r\n\t\t\t\t\tsetActiveChat={setActiveChat}\r\n\t\t\t\t\thandleLogout={handleLogout}\r\n\t\t\t\t/>\r\n\t\t\t\t<ActiveChat\r\n\t\t\t\t\tactiveConversation={activeConversation}\r\n\t\t\t\t\tconversations={conversations}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tpostMessage={postMessage}\r\n\t\t\t\t\tpatchMessage={patchMessage}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Button, Snackbar } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  snackbar: {\r\n    fontWeight: \"bold\",\r\n  },\r\n  icon: {\r\n    color: \"white\",\r\n  },\r\n  success: {\r\n    backgroundColor: \"green\",\r\n  },\r\n  error: {\r\n    backgroundColor: \"red\",\r\n  },\r\n}));\r\n\r\nconst SnackbarMessage = ({\r\n  setSnackBarOpen,\r\n  message,\r\n  snackBarOpen,\r\n  isError,\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const icon = isError ? (\r\n    <Close color=\"secondary\" />\r\n  ) : (\r\n    <CheckCircleOutlineIcon />\r\n  );\r\n\r\n  return (\r\n    <Snackbar\r\n      open={snackBarOpen}\r\n      onClose={() => setSnackBarOpen(false)}\r\n      message={message || \"An error occurred. Please try again.\"}\r\n      action={\r\n        <React.Fragment>\r\n          <Button\r\n            className={classes.icon}\r\n            size=\"small\"\r\n            onClick={() => setSnackBarOpen(false)}\r\n          >\r\n            {icon}\r\n          </Button>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{\r\n        classes: {\r\n          root: isError ? classes.error : classes.success,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SnackbarMessage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Grid, Box, Typography, makeStyles } from \"@material-ui/core\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  contentContainer: {\r\n    display: \"flex\",\r\n    margin: \"64px 32px\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  successText: {\r\n    color: \"#000000\",\r\n    fontSize: \"26px\",\r\n    fontWeight: \"600\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n  errorText: {\r\n    color: \"red\",\r\n    fontSize: \"18px\",\r\n    paddingBottom: \"20px\",\r\n  },\r\n}));\r\n\r\nconst VerifySuccess = ({ checkVerification }) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const classes = useStyles();\r\n\r\n  const [verificationStatus, setVerificationStatus] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!location.search) {\r\n      history.push(\"/\");\r\n    } else {\r\n      const token = new URLSearchParams(location.search).get(\"token\");\r\n      if (!token) {\r\n        history.push(\"/\");\r\n      } else {\r\n        checkVerification(token)\r\n          .then(() => {\r\n            setVerificationStatus(\"success\");\r\n            setTimeout(() => {\r\n              history.push(\"/\");\r\n            }, 5000); // Redirect after 5 seconds\r\n          })\r\n          .catch((error) => {\r\n            console.error(error);\r\n            setVerificationStatus(\"error\");\r\n            setTimeout(() => {\r\n              history.push(\"/\");\r\n            }, 5000); // Redirect after 5 seconds\r\n          });\r\n      }\r\n    }\r\n  }, [history, location.search, checkVerification]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" className={classes.root}>\r\n      <Box className={classes.contentContainer}>\r\n        <Grid container justifyContent=\"center\" direction=\"column\">\r\n          {verificationStatus === \"success\" ? (\r\n            <>\r\n              <Typography variant=\"body1\" className={classes.successText}>\r\n                Thank you, your account has been verified!\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                You will be redirected to the home page shortly.\r\n              </Typography>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Typography variant=\"body1\" className={classes.errorText}>\r\n                Email verification failed.\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                You will be redirected to the home page shortly.\r\n              </Typography>\r\n            </>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default VerifySuccess;\r\n","import React from \"react\";\r\nimport { Button, Typography, TextField } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\"; // Import the Link component\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginTop: theme.spacing(4),\r\n\t\tposition: \"relative\", // Add relative positioning\r\n\t},\r\n\tprofilePhoto: {\r\n\t\twidth: 150,\r\n\t\theight: 150,\r\n\t\tborderRadius: \"50%\",\r\n\t\tobjectFit: \"cover\",\r\n\t\tmarginBottom: theme.spacing(2),\r\n\t},\r\n\tbackButton: {\r\n\t\tposition: \"absolute\",\r\n\t\ttop: 0,\r\n\t\tleft: 30,\r\n\t\tmargin: theme.spacing(1),\r\n\t},\r\n}));\r\n\r\nconst Profile = ({ user, setUser }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst uploadPhoto = async (photoFile) => {\r\n\t\ttry {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append(\"image\", photoFile);\r\n\t\t\tconsole.log(photoFile);\r\n\t\t\t// Make the API call to upload the photo\r\n\t\t\tconst response = await axios.post(\"/api/user/update-photo\", formData);\r\n\r\n\t\t\t// Update the user object with the new photoUrl\r\n\t\t\tsetUser((prevUser) => ({\r\n\t\t\t\t...prevUser,\r\n\t\t\t\tphotoUrl: response.data.photoUrl,\r\n\t\t\t}));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\t// Handle the error here if needed\r\n\t\t}\r\n\t};\r\n\r\n\tconst handlePhotoChange = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tif (file) {\r\n\t\t\tuploadPhoto(file);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto=\"/home\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tclassName={classes.backButton}\r\n\t\t\t>\r\n\t\t\t\tBack to Home\r\n\t\t\t</Button>\r\n\t\t\t<img src={user.photoUrl} alt=\"Profile\" className={classes.profilePhoto} />\r\n\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t{user.username}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\t{user.email}\r\n\t\t\t</Typography>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tid=\"profile-photo-input\"\r\n\t\t\t\tname=\"image\"\r\n\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\tonChange={handlePhotoChange}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"profile-photo-input\">\r\n\t\t\t\t<Button component=\"span\" variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\tUpload Profile Photo\r\n\t\t\t\t</Button>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginTop: theme.spacing(4),\r\n\t\tposition: \"relative\",\r\n\t},\r\n\tbackButton: {\r\n\t\tposition: \"absolute\",\r\n\t\ttop: 0,\r\n\t\tleft: 30,\r\n\t\tmargin: theme.spacing(1),\r\n\t},\r\n}));\r\n\r\nconst Account = ({ user }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Button\r\n\t\t\t\tcomponent={Link}\r\n\t\t\t\tto=\"/home\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tclassName={classes.backButton}\r\n\t\t\t>\r\n\t\t\t\tBack to Home\r\n\t\t\t</Button>\r\n\t\t\t<Typography variant=\"h5\" gutterBottom>\r\n\t\t\t\t{user.username}'s Account\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\tEmail: {user.email}\r\n\t\t\t</Typography>\r\n\t\t\t<Typography variant=\"body1\" gutterBottom>\r\n\t\t\t\tAccount settings and details can go here.\r\n\t\t\t</Typography>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Account;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Route, Switch, withRouter, Redirect } from \"react-router-dom\";\r\n\r\nimport Access from \"./Access.js\";\r\nimport Signup from \"./pages/Signup.js\";\r\nimport Login from \"./pages/Login.js\";\r\nimport ChangePassword from \"./pages/ChangePassword.js\";\r\nimport EmailVerification from \"./pages/EmailVerification.js\";\r\nimport RecoverPassword from \"./pages/RecoverPassword.js\";\r\nimport { SnackBarMessage, Home } from \"./components\";\r\nimport { SocketContext, socket } from \"./context/socket\";\r\nimport Verify from \"./pages/Verify.js\";\r\nimport Profile from \"./components/Profile.js\";\r\nimport Account from \"./components/Account.js\";\r\n\r\nconst Routes = (props) => {\r\n\tconst [user, setUser] = useState({\r\n\t\tisFetching: true,\r\n\t});\r\n\r\n\tconst [message, setMessage] = useState(\"\");\r\n\tconst [isError, setIsError] = useState(false);\r\n\tconst [snackBarOpen, setSnackBarOpen] = useState(false);\r\n\r\n\tconst login = async (credentials) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(\"/auth/login\", credentials);\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst register = async (credentials) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(\"/auth/register\", credentials);\r\n\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetUser({ error: error.response.data.error || \"Server Error\" });\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst recoverPassword = async (email) => {\r\n\t\ttry {\r\n\t\t\tawait axios.post(\"/auth/password/recover\", {\r\n\t\t\t\temail,\r\n\t\t\t});\r\n\r\n\t\t\tsetMessage(\"Recovery email sent!\");\r\n\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst recoveryChangePassword = async (token, password) => {\r\n\t\ttry {\r\n\t\t\tawait axios.post(`/auth/password/set/${token}`, {\r\n\t\t\t\tnewPassword: password,\r\n\t\t\t});\r\n\t\t\tsetMessage(\"Password changed successfully\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst resendVerification = async (user) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.post(`/auth/verify/resend`, { user });\r\n\t\t\tconsole.log(data);\r\n\t\t\tsetMessage(\"Verification resent!\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkVerification = async (token) => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get(`/auth/verify?token=${token}`);\r\n\t\t\tawait localStorage.setItem(\"messenger-token\", data.token);\r\n\t\t\tsetUser(data);\r\n\t\t\tsetMessage(\"Email verified successfully!\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(\"Email verification failed. Please try again.\");\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\tconst logout = async (id) => {\r\n\t\ttry {\r\n\t\t\tawait axios.delete(\"/auth/logout\");\r\n\t\t\tawait localStorage.removeItem(\"messenger-token\");\r\n\t\t\tsetUser({});\r\n\t\t\tsetMessage(\"Succesfully logged out\");\r\n\t\t\tsetIsError(false);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t\tsocket.emit(\"logout\", id);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tsetMessage(error.response.data.error);\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\t// Lifecycle\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tsetUser((prev) => ({ ...prev, isFetching: true }));\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await axios.get(\"/auth/user\");\r\n\t\t\t\tsetUser(data);\r\n\t\t\t\tif (data.id) {\r\n\t\t\t\t\tsocket.emit(\"go-online\", data.id);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t} finally {\r\n\t\t\t\tsetUser((prev) => ({ ...prev, isFetching: false }));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchUser();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (user?.error) {\r\n\t\t\t// check to make sure error is what we expect, in case we get an unexpected server error object\r\n\t\t\tif (typeof user.error === \"string\") {\r\n\t\t\t\tsetMessage(user.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetMessage(\"Internal Server Error. Please try again\");\r\n\t\t\t}\r\n\t\t\tsetIsError(true);\r\n\t\t\tsetSnackBarOpen(true);\r\n\t\t}\r\n\t}, [user?.error]);\r\n\r\n\tif (user?.isFetching) {\r\n\t\treturn <div>Loading...</div>;\r\n\t}\r\n\tconsole.log(user);\r\n\treturn (\r\n\t\t<SocketContext.Provider value={socket}>\r\n\t\t\t{snackBarOpen && (\r\n\t\t\t\t<SnackBarMessage // Updated component name\r\n\t\t\t\t\tsetSnackBarOpen={setSnackBarOpen}\r\n\t\t\t\t\tmessage={message}\r\n\t\t\t\t\tsnackBarOpen={snackBarOpen}\r\n\t\t\t\t\tisError={isError} // Set this based on whether it's an error message\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/login\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/register\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\tWrappedComponent={<Signup user={user} register={register} />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/verify\"\r\n\t\t\t\t\trender={() =>\r\n\t\t\t\t\t\tuser && user?.id && !user?.active ? (\r\n\t\t\t\t\t\t\t<Verify checkVerification={checkVerification} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/password-recovery\"\r\n\t\t\t\t\trender={() =>\r\n\t\t\t\t\t\tuser?.id && user?.active ? (\r\n\t\t\t\t\t\t\t<Redirect to=\"/home\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\t\tWrappedComponent={\r\n\t\t\t\t\t\t\t\t\t<RecoverPassword recoverPassword={recoverPassword} />\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/change-password\"\r\n\t\t\t\t\trender={() => (\r\n\t\t\t\t\t\t<ChangePassword recoveryChangePassword={recoveryChangePassword} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath=\"/\"\r\n\t\t\t\t\trender={(props) =>\r\n\t\t\t\t\t\tuser?.id ? (\r\n\t\t\t\t\t\t\tuser?.active ? (\r\n\t\t\t\t\t\t\t\t<Home user={user} logout={logout} />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Access\r\n\t\t\t\t\t\t\t\t\tWrappedComponent={\r\n\t\t\t\t\t\t\t\t\t\t<EmailVerification\r\n\t\t\t\t\t\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\t\t\t\t\t\tresendVerification={resendVerification}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Access WrappedComponent={<Login user={user} login={login} />} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/home\"\r\n\t\t\t\t\trender={() => <Home user={user} logout={logout} />}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/profile\"\r\n\t\t\t\t\trender={() => <Profile user={user} setUser={setUser} />}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/account\"\r\n\t\t\t\t\trender={() => <Account user={user} setUser={setUser} />}\r\n\t\t\t\t/>\r\n\t\t\t</Switch>\r\n\t\t</SocketContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default withRouter(Routes);\r\n","import React from \"react\";\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport { theme } from \"./themes/theme\";\r\nimport Routes from \"./routes\";\r\nimport axios from \"axios\";\r\n\r\naxios.interceptors.request.use(async function (config) {\r\n  const token = await localStorage.getItem(\"messenger-token\");\r\n  config.headers[\"x-access-token\"] = token;\r\n\r\n  return config;\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <MuiThemeProvider theme={theme}>\r\n      <BrowserRouter>\r\n        <Routes />\r\n      </BrowserRouter>\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}